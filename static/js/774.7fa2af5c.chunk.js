"use strict";(self.webpackChunkkerbal_transfer_illustrator=self.webpackChunkkerbal_transfer_illustrator||[]).push([[774],{6752:function(t,e,r){var a,i=r(1684),o=r(8818),n=r(724),s=r(4067);!function(t){function e(t,e,a,i,u){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=u?1:-1,h=e.stdGravParam,v=e.soi,d=(0,n.A$)(a),m=1/(2/v-d/h),f=1e-8,b=o.Z.rotateToPerifocalFromInertial(a,t),p=t.semiMajorAxis;if(t.eccentricity>f){var y=function(e){return r(e,t,h,v,b,d,m,l).err},g=t.semiMajorAxis*(1-t.eccentricity),M=t.eccentricity>1?v:t.semiMajorAxis*(1+t.eccentricity);p=(0,s.v$)(y,g,M)}var A=r(p,t,h,v,b,d,m,l),Z=A.parkNu,P=A.e,T=A.soiNu,O=A.pPos,D=A.pVel,S=o.Z.trueAnomalyToDate(T,P,o.Z.siderealPeriod(m,h),0,0),x=c?o.Z.trueAnomalyToOrbitDate(Z,t,i-S-t.siderealPeriod/2):i-S,j={date:x,pos:O,vel:D},G={date:x,pos:O,vel:o.Z.velocityAtTrueAnomaly(t,h,Z)},F=o.Z.stateToOrbit(j,e);if(1===l){var I=o.Z.maneuverFromOrbitalStates(G,j);return{orbits:[F],intersectTimes:[F.epoch,F.epoch+S],maneuvers:[I]}}var N=o.Z.maneuverFromOrbitalStates(j,G);return{orbits:[F],intersectTimes:[F.epoch+S,F.epoch],maneuvers:[N]}}function r(t,e,r,a,i,s,u,c){var l=s+2*r*(1/t-1/a),h=Math.sqrt(l),v=Math.sqrt(1+2*(.5*l-r/t)*t*t*l/r/r),d=u*(1-v*v),m=c*o.Z.trueAnomalyAtDistance(a,v,d),f=(0,n.zy)(o.Z.motionDirectionAtTrueAnomaly(m,v),Math.sqrt(s)),b=(0,n.zy)(n.o7,t),p=(0,n.zy)(n.Nb,h),y=Math.atan2(i.z,Math.sqrt(Math.abs(f.y*f.y-i.z*i.z)));f=(0,n.oU)(f,n.o7,y),b=(0,n.oU)(b,n.o7,y),p=(0,n.oU)(p,n.o7,y);var g=Math.atan2(i.y,i.x)-Math.atan2(f.y,f.x);f=(0,n.oU)(f,n.gG,g),b=(0,n.oU)(b,n.gG,g),p=(0,n.oU)(p,n.gG,g),f=o.Z.rotateToInertialFromPerifocal(f,e),b=o.Z.rotateToInertialFromPerifocal(b,e),p=o.Z.rotateToInertialFromPerifocal(p,e);var M=o.Z.angleInOrbitPlane(b,e);return{err:t-o.Z.distanceAtOrbitTrueAnomaly(M,e),parkNu:M,e:v,soiNu:m,pPos:b,pVel:p}}function a(t,e,r,a,u){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,n.R3)(0,0,0),h=u?1:-1,v=e.stdGravParam,d=e.soi,m=(0,n.A$)(r),p=i.Z.minFlybyRadius(e),y=1/(2/d-m/v),g=1-p/y,M=y*(1-g*g),A=h*o.Z.trueAnomalyAtDistance(d,g,M),Z=-h*Math.PI,P=o.Z.motionAngleAtTrueAnomaly(A,g),T=h*(P-Z),O=(0,n.z7)(o.Z.angleInOrbitPlane(r,t)-h*T),D=function(e){var a=o.Z.positionAtTrueAnomaly(t,e),i=(0,n.sZ)(a,l),s=(0,n.G$)((0,n.oF)(i,r));s.z<0&&(s=(0,n.zy)(s,-1));var u=1===h?(0,n.Nx)(i,r,s):(0,n.Nx)(r,i,s);return Math.abs(u-T)};O=t.eccentricity<1?(0,s.ri)(D,O-Math.PI,O+Math.PI):(0,s.ri)(D,b(t,e),f(t,e));var S=o.Z.positionAtTrueAnomaly(t,O),x=(0,n.sZ)(S,l),j=(0,n.G$)((0,n.oF)(x,r));j.z<0&&(j=(0,n.zy)(j,-1));var G=(0,n.G7)(x),F=(0,n.A$)(r),I=F/2-v/d,N=(G-p)/(p+G),q=p/(1-N),R=-v/(2*q),w=Math.sqrt(2*(R+v/p)),z=Math.sqrt(2*(I+v/p)),E=(0,n.N2)(n.gG,j),$=(0,n.R3)(Math.cos(P),Math.sin(P),0),L=(0,n.oU)($,E.axis,E.angle),V=(0,n.N2)(L,(0,n.G$)(r)),_=(0,n.oU)((0,n.oU)((0,n.zy)(n.o7,p),E.axis,E.angle),V.axis,V.angle),k=(0,n.oU)((0,n.oU)(n.Nb,E.axis,E.angle),V.axis,V.angle),U=(0,n.zy)(k,z),H=(0,n.zy)(k,w),C=Math.abs(o.Z.trueAnomalyToDate(A,g,o.Z.siderealPeriod(y,v),0,0)),K=Math.abs(o.Z.trueAnomalyToDate(Z,N,o.Z.siderealPeriod(q,v),0,0)),J=a-h*C,B=J-h*K,Q={date:J,pos:_,vel:H},W={date:J,pos:_,vel:U},X=c?o.Z.trueAnomalyToOrbitDate(O,t,B-t.siderealPeriod/2):B,Y=a+X-B;Q.date=Q.date+X-B,W.date=Q.date;var tt=o.Z.stateToOrbit(Q,e);tt.meanAnomalyEpoch=o.Z.dateToMeanAnomaly(X,tt.siderealPeriod,tt.meanAnomalyEpoch,tt.epoch),tt.epoch=X;var et=o.Z.stateToOrbit(W,e),rt=o.Z.velocityAtTrueAnomaly(t,e.stdGravParam,O),at=o.Z.velocityAtTrueAnomaly(tt,e.stdGravParam,Z),it={date:B,pos:x,vel:rt},ot={date:B,pos:x,vel:at};if(1===h){var nt=o.Z.maneuverFromOrbitalStates(it,ot),st=o.Z.maneuverFromOrbitalStates(Q,W);return{orbits:[tt,et],intersectTimes:[tt.epoch,et.epoch,Y],maneuvers:[nt,st]}}var ut=o.Z.maneuverFromOrbitalStates(ot,it),ct=o.Z.maneuverFromOrbitalStates(W,Q);return{orbits:[et,tt],intersectTimes:[Y,et.epoch,tt.epoch],maneuvers:[ct,ut]}}function u(t,e,a,u,l){var h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"direct",m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,n.R3)(0,0,0),b=l?1:-1,p=-n.uo,y=n.uo-Number.EPSILON;if("direct"===d){var g=e.stdGravParam,M=e.soi,A=(0,n.A$)(a),Z=1/(2/M-A/g),P=t.semiMajorAxis,T=o.Z.rotateToPerifocalFromInertial(a,t),O=r(P,t,g,M,T,A,Z,b),D=O.parkNu;p=D-Math.PI,y=D+Math.PI}else if("oberth"===d){var S=e.stdGravParam,x=e.soi,j=i.Z.minFlybyRadius(e),G=(0,n.A$)(a),F=G/2-S/x,I=-S/(2*F),N=1-j/I,q=I*(1-N*N),R=o.Z.trueAnomalyAtDistance(x,N,q),w=o.Z.motionAngleAtTrueAnomaly(R,N),z=w+Math.PI,E=(0,n.z7)(o.Z.angleInOrbitPlane(a,t)-b*z);p=E-Math.PI,y=E+Math.PI}t.eccentricity>1&&(p=-(y=f(t,e)-2*Number.EPSILON));var $="direct"===d?c:"oberth"===d?v:c;function L(r){if(isNaN(r)||r===1/0)throw console.log(r),Error("nu cannot be NaN");var i=$(r,t,e,a,u,b,h,m,!1),o=i.deltaV,n=i.err;return o*Math.exp(Math.min(100*n,10))}var V=(0,s.ri)(L,p,y,1e-4),_=$(V,t,e,a,u,b,h,m,!0);return _.trajectoryInfo}function c(t,e,r,a,i,s){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,n.R3)(0,0,0),h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],v=(0,n.sZ)(o.Z.positionAtTrueAnomaly(e,t),c);if(isNaN(v.x))throw Error("nu cannot be NaN");var d=l(v,r,a,i,s,h),m=d.err,f=d.orbit,b=u?o.Z.trueAnomalyToOrbitDate(t,e,f.epoch-e.siderealPeriod/2):f.epoch,p=i+b-f.epoch;f.epoch=b;var y,g={date:f.epoch,pos:o.Z.positionAtTrueAnomaly(e,t),vel:o.Z.velocityAtTrueAnomaly(e,r.stdGravParam,t)},M=o.Z.orbitToStateAtDate(f,r,f.epoch);if(1===s){var A=o.Z.maneuverFromOrbitalStates(g,M);y={orbits:[f],intersectTimes:[f.epoch,p],maneuvers:[A]}}else{var Z=o.Z.maneuverFromOrbitalStates(M,g);y={orbits:[f],intersectTimes:[p,f.epoch],maneuvers:[Z]}}var P=y.maneuvers[0].deltaVMag;return{deltaV:P,err:m,trajectoryInfo:y}}function l(t,e,r,a,i){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=e.stdGravParam,l=(0,n.G7)(t),v=e.soi,d=(0,n.G$)((0,n.oF)(t,r)),m=(0,n.oF)(n.gG,d),f=(0,n.G7)(m),b=0===f?n.o7:(0,n.$_)(m,f),p=1/(2/v-(0,n.A$)(r)/c),y=(0,n.ZF)(d.z),g=(0,n.z7)((0,n.JG)(1,b.y)*(0,n.ZF)(b.x)),M=1-2*Number.EPSILON,A=(0,n.uZ)(v/p-1+Number.EPSILON,0,M);function Z(a){return isNaN(a)?2:h(a,p,g,y,t,l,v,c,r,e.id,i).err}p<0&&(A=1+2*Number.EPSILON,M=1===(M=Math.max(1-l/p,l/p-1))?1+4*Number.EPSILON:M);var P=(0,s.ri)(Z,A,M,1e-6),T=h(P,p,g,y,t,l,v,c,r,e.id,i),O=T.err,D=T.orbit;if(u){var S=D.semiLatusRectum,x=i*o.Z.trueAnomalyAtDistance(l,P,S),j=i*o.Z.trueAnomalyAtDistance(v,P,S),G=o.Z.siderealPeriod(p,c),F=o.Z.trueToMeanAnomaly(x,P),I=o.Z.trueAnomalyToDate(j,P,G,F,0),N=a-I;D.meanAnomalyEpoch=F,D.epoch=N}return{err:O,orbit:D}}function h(t,e,r,a,i,s,u,c,l,h,v){var d=e*(1-t*t),m=v*o.Z.trueAnomalyAtDistance(s,t,d),f=v*o.Z.trueAnomalyAtDistance(u,t,d),b={orbiting:h,semiMajorAxis:e,eccentricity:t,inclination:a,ascNodeLongitude:r,argOfPeriapsis:(0,n.z7)(o.Z.angleInPlane(i,r,a,0)-m),meanAnomalyEpoch:0,epoch:0,semiLatusRectum:d,siderealPeriod:o.Z.siderealPeriod(e,c)},p=o.Z.velocityAtTrueAnomaly(b,c,f),y=1-(0,n._O)((0,n.G$)(l),(0,n.G$)(p));return isNaN(y)&&(y=2),console.log(),{err:y,orbit:b}}function v(t,e,r,a,i,s){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,n.R3)(0,0,0),l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],h=(0,n.sZ)(o.Z.positionAtTrueAnomaly(e,t),c),v=o.Z.velocityAtTrueAnomaly(e,r.stdGravParam,t),m=d(h,v,r,a,i,s,l),f=m.deltaV,b=m.obrPreState,p=m.obrPostState,y=m.hypPreState,g=m.hypPostState,M={orbits:[],intersectTimes:[],maneuvers:[]};if(l){var A=u?o.Z.trueAnomalyToOrbitDate(t,e,b.date-e.siderealPeriod/2):b.date,Z=i+A-b.date;y.date=y.date+A-b.date,g.date=y.date,b.date=A,p.date=A;var P=o.Z.stateToOrbit(y,r);P.meanAnomalyEpoch=o.Z.dateToMeanAnomaly(A,P.siderealPeriod,P.meanAnomalyEpoch,P.epoch),P.epoch=A;var T=o.Z.stateToOrbit(g,r);if(1===s){var O=o.Z.maneuverFromOrbitalStates(b,p),D=o.Z.maneuverFromOrbitalStates(y,g);M={orbits:[P,T],intersectTimes:[P.epoch,T.epoch,Z],maneuvers:[O,D]}}else{var S=o.Z.maneuverFromOrbitalStates(p,b),x=o.Z.maneuverFromOrbitalStates(g,y);M={orbits:[T,P],intersectTimes:[Z,T.epoch,P.epoch],maneuvers:[x,S]}}}return{deltaV:f,err:0,trajectoryInfo:M}}function d(t,e,r,a,u,c){var l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],h=r.stdGravParam,v=r.soi,d=(0,n.G7)(t),m=(0,n.$_)(t,d),f=(0,n.A$)(a),b=(0,n.$_)(a,Math.sqrt(f)),p=f/2-h/v,y=-h/(2*p),g=(0,n.G$)((0,n.oF)(m,b));g.z<0&&(g=(0,n.zy)(g,-1));var M=1===c?(0,n.Nx)(m,b,g):(0,n.Nx)(b,m,g);isNaN(M)&&console.log(m,b,g);var A=function(t){var e=1-t/y,r=y*(1-e*e),a=c*o.Z.trueAnomalyAtDistance(v,e,r),i=o.Z.motionAngleAtTrueAnomaly(a,e),s=(0,n.z7)(i-c*M,-Math.PI*(c+1));return t-d*Math.cos(s)},Z=i.Z.minFlybyRadius(r),P=(0,s.ri)(A,Z,d),T=A(P);T<0&&(Z=(0,s.v$)(A,P,d)+1);var O=function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=1-t/y,s=y*(1-i*i),u=c*o.Z.trueAnomalyAtDistance(v,i,s),l=o.Z.motionAngleAtTrueAnomaly(u,i),m=(0,n.z7)(l-c*M,-Math.PI*(c+1)),f=(d-t)/(t-d*Math.cos(m)),P=t/(1-f),T=-h/(2*P),O=Math.sqrt(2*(T+h/t)),D=Math.sqrt(2*(p+h/t)),S=(0,n.N2)(n.gG,g),x=(0,n.R3)(Math.cos(l),Math.sin(l),0),j=(0,n.oU)(x,S.axis,S.angle),G=(0,n.N2)(j,b),F=Math.sqrt(2*(T+h/d)),I=o.Z.motionDirectionAtTrueAnomaly(m,f),N=(0,n.oU)((0,n.oU)(I,S.axis,S.angle),G.axis,S.angle),q=(0,n.zy)(N,F),R=Math.abs(O-D)+(0,n.G7)((0,n.qK)(q,e)),w=(0,n.R3)(0,0,0),z=(0,n.R3)(0,0,0),E=(0,n.R3)(0,0,0),$=0,L=0;if(a){w=(0,n.oU)((0,n.oU)((0,n.zy)((0,n.R3)(1,0,0),t),S.axis,S.angle),G.axis,G.angle);var V=(0,n.oU)((0,n.oU)((0,n.R3)(0,1,0),S.axis,S.angle),G.axis,G.angle);z=(0,n.zy)(V,D),E=(0,n.zy)(V,O),$=Math.abs(o.Z.trueAnomalyToDate(u,i,o.Z.siderealPeriod(y,h),0,0)),L=Math.abs(o.Z.trueAnomalyToDate(m,f,o.Z.siderealPeriod(P,h),0,0))}return isNaN(R)&&(console.log(r.name,d,Z,A(d),A(Z)),console.log(t,d-t,t-d*Math.cos(m),M,l)),{deltaV:R,obrVel:q,periapsisPos:w,hypPeriapsisVel:z,obrPeriapsisVel:E,hypDuration:$,obrDuration:L}},D=(0,s.ri)((function(t){return O(t).deltaV}),Z,d,1e-8),S=O(D,l),x=S.deltaV,j=S.obrVel,G=S.periapsisPos,F=S.hypPeriapsisVel,I=S.obrPeriapsisVel,N=S.hypDuration,q=S.obrDuration,R=u-c*N,w=R-c*q,z={date:w,pos:t,vel:e},E={date:w,pos:t,vel:j},$={date:R,pos:G,vel:I},L={date:R,pos:G,vel:F};return{deltaV:x,obrPreState:z,obrPostState:E,hypPreState:$,hypPostState:L}}function m(t,e,r){return r*o.Z.trueAnomalyAtDistance(e.soi,t.eccentricity,t.semiLatusRectum)}function f(t,e){return m(t,e,1)}function b(t,e){return m(t,e,-1)}function p(t,e,r){var a=void 0;return t.eccentricity<1&&(a=1===r?t.epoch:t.epoch-t.siderealPeriod),o.Z.trueAnomalyToDate(m(t,e,r),t.eccentricity,t.siderealPeriod,t.meanAnomalyEpoch,t.epoch,a)}function y(t,e,r){return o.Z.positionAtTrueAnomaly(t,m(t,e,r))}t.fastDeparture=function(t,r,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e(t,r,a,i,!0,o)},t.fastArrival=function(t,r,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e(t,r,a,i,!1,o)},t.fastDepartureArrival=e,t.fastOberthDeparture=function(t,e,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,n.R3)(0,0,0);return a(t,e,r,i,!0,o,s)},t.fastOberthArrival=function(t,e,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,n.R3)(0,0,0);return a(t,e,r,i,!1,o,s)},t.optimalDeparture=function(t,e,r,a){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"direct",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,n.R3)(0,0,0);return u(t,e,r,a,!0,i,o,s)},t.optimalArrival=function(t,e,r,a){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"direct",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,n.R3)(0,0,0);return u(t,e,r,a,!1,i,o,s)},t.optimalDepartureArrival=u,t.departArriveForPosition=l,t.oberthDepartArriveForTrueAnomaly=v,t.oberthDepartArriveForPosition=d,t.ejectionTrueAnomaly=f,t.insertionTrueAnomaly=b,t.ejectionDate=function(t,e){return p(t,e,1)},t.insertionDate=function(t,e){return p(t,e,-1)},t.ejectionPosition=function(t,e){return y(t,e,1)},t.insertionPosition=function(t,e){return y(t,e,-1)},t.ejectionVelocity=function(t,e){return function(t,e,r){return o.Z.velocityAtTrueAnomaly(t,e.stdGravParam,m(t,e,r))}(t,e,1)},t.insertionVelocity=function(t,e){return y(t,e,-1)}}(a||(a={})),e.Z=a},1684:function(t,e,r){var a,i=r(8818),o=r(6752),n=r(724),s=r(4067);!function(t){function e(t){return t.radius+t.atmosphereHeight}function r(t){return t.soi}t.minFlybyRadius=e,t.maxFlybyRadius=r,t.legDurationBounds=function(t,e,r){var a=.5*(t.semiMajorAxis+e.semiMajorAxis),o=i.Z.siderealPeriod(a,r.stdGravParam);return{lb:o/25,ub:2*o}},t.flybyParameters=function(t){var a=t.velIn,o=t.velOut,u=t.body,c=t.time,l=u.stdGravParam,h=u.soi,v=(0,n.A$)(a),d=(0,n.A$)(o),m=(0,n.$_)(a,Math.sqrt(v)),f=(0,n.$_)(o,Math.sqrt(d)),b=v/2-l/h,p=d/2-l/h,y=-l/(2*b),g=-l/(2*p),M=(0,n.G$)((0,n.oF)(m,f)),A=(0,n.ZF)((0,n._O)(m,f)),Z=function(t){var e=1-t/y,r=1-t/g,a=y*(1-e*e),o=g*(1-r*r),s=-i.Z.trueAnomalyAtDistance(h,e,a),u=i.Z.trueAnomalyAtDistance(h,r,o),c=i.Z.motionAngleAtTrueAnomaly(s,e),l=i.Z.motionAngleAtTrueAnomaly(u,r),v=Math.abs(A-(0,n.z7)(l-c));return isNaN(v)?Math.PI:v},P=(0,s.ri)(Z,e(u),r(u),1e-8),T=Z(P),O=1-P/y,D=1-P/g,S=Math.sqrt(2*(b+l/P)),x=Math.sqrt(2*(p+l/P)),j=Math.abs(x-S);return{inSemiMajorAxis:y,inEccentricity:O,inDirection:m,outSemiMajorAxis:g,outEccentricity:D,outDirection:f,normalDirection:M,deltaV:j,error:T,time:c}},t.flybyFromParameters=function(t,e){var r=e.soi,a=e.stdGravParam,s=t.inSemiMajorAxis,u=t.outSemiMajorAxis,c=t.inEccentricity,l=s*(1-c),h=s*(1-c*c),v=-i.Z.trueAnomalyAtDistance(r,c,h),d=i.Z.motionDirectionAtTrueAnomaly(v,c),m=(0,n.N2)(d,t.inDirection),f=m.axis,b=m.angle,p=(0,n.oU)((0,n.R3)(l,0,0),f,b),y=Math.sqrt(a*(2/l-1/s)),g=Math.sqrt(a*(2/l-1/u)),M=(0,n.oU)((0,n.R3)(0,y,0),f,b),A=(0,n.oU)((0,n.R3)(0,g,0),f,b),Z={date:t.time,pos:p,vel:M},P={date:t.time,pos:p,vel:A},T=i.Z.stateToOrbit(Z,e),O=i.Z.stateToOrbit(P,e),D=i.Z.maneuverFromOrbitalStates(Z,P),S=o.Z.insertionDate(T,e),x=o.Z.ejectionDate(O,e);return{orbits:[T,O],intersectTimes:[S,t.time,x],maneuvers:[D]}},t.multiFlybyInputsFromAgent=function(t,e){for(var r=(0,n.t7)(e.startDateMin,e.startDateMax,t[0]),a=[],i=0;i<t.length-1;i++){var o=(0,n.t7)(e.flightTimesMax[i],e.flightTimesMin[i],t[i+1]);a.push(o)}return{system:e.system,startOrbit:e.startOrbit,endOrbit:e.endOrbit,flybyIdSequence:e.flybyIdSequence,startDate:r,flightTimes:a,ejectionInsertionType:e.ejectionInsertionType,planeChange:e.planeChange,matchStartMo:e.matchStartMo,matchEndMo:e.matchEndMo,noInsertionBurn:e.noInsertionBurn}}}(a||(a={})),e.Z=a},8818:function(t,e,r){var a,i=r(724),o=r(4067);!function(t){function e(t,e){return i.uo*Math.sqrt(Math.abs(t*t*t)/e)}function r(t,e){return Math.atan(e*Math.sin(t)/(1+e*Math.cos(t)))}function a(t,e){return t+i.pj-r(t,e)}function n(t,e){var r=a(t,e);return(0,i.R3)(Math.cos(r),Math.sin(r),0)}function s(t,e,r){return r/(1+e*Math.cos(t))}function u(t,e,r,a){return r+i.uo*(t-a)/e}function c(t,e,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,n=a+(t-r)*e/i.uo;if(o){var s=Math.ceil((o-n)/e);n+=e*s}return n}function l(t,e){if(e<1){var r=2*Math.atan2(Math.sin(t/2)*Math.sqrt(1-e),Math.cos(t/2)*Math.sqrt(1+e));return r-e*Math.sin(r)}var a=2*Math.atanh(Math.tan(t/2)*Math.sqrt((e-1)/(e+1)));return e*Math.sinh(a)-a}function h(t,e){if(e<1){var r=(0,o.Zg)((function(r){return r-e*Math.sin(r)-t}),(function(t){return 1-e*Math.cos(t)}),t,1e-12);return 2*Math.atan(Math.sqrt((1+e)/(1-e))*Math.tan(.5*r))}var a=Math.abs(t)>4*Math.PI?4*Math.sign(t)*Math.PI:t,i=(0,o.Zg)((function(r){return e*Math.sinh(r)-r-t}),(function(t){return e*Math.cosh(t)-1}),a,1e-12);return 2*Math.atan(Math.sqrt((e+1)/(e-1))*Math.tanh(.5*i))}function v(t,e,r,a,i){return h(u(t,r,a,i),e)}function d(t,e,r,a,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,n=l(t,e);return c(n,r,a,i,o)}function m(t,e,r,a){var o=(0,i.HJ)(t,-a,-r,-e);return Math.atan2(o.y,o.x)}function f(t,e){var r=t.eccentricity,a=t.inclination,o=t.ascNodeLongitude,n=t.argOfPeriapsis,u=s(e,r,t.semiLatusRectum),c=(0,i.R3)(u*Math.cos(e),u*Math.sin(e),0);return(0,i.HJ)(c,o,a,n)}function b(t,e,r){var a=t.semiMajorAxis,o=t.eccentricity,u=t.inclination,c=t.ascNodeLongitude,l=t.argOfPeriapsis,h=s(r,o,t.semiLatusRectum),v=Math.sqrt(e*(2/h-1/a)),d=(0,i.zy)(n(r,o),v);return(0,i.HJ)(d,c,u,l)}t.orbitFromElements=function(t,r){var a=t.semiLatusRectum?t.semiLatusRectum:t.semiMajorAxis*(1-t.eccentricity*t.eccentricity),i=t.siderealPeriod?t.siderealPeriod:e(t.semiMajorAxis,r.stdGravParam);return{orbiting:r.id,semiMajorAxis:t.semiMajorAxis,eccentricity:t.eccentricity,inclination:t.inclination,argOfPeriapsis:t.argOfPeriapsis,ascNodeLongitude:t.ascNodeLongitude,meanAnomalyEpoch:t.meanAnomalyEpoch,epoch:t.epoch,semiLatusRectum:a,siderealPeriod:i}},t.maneuverFromOrbitalStates=function(t,e){var r=(0,i.qK)(e.vel,t.vel);return{preState:t,postState:e,deltaV:r,deltaVMag:(0,i.G7)(r)}},t.maneuverToComponents=function(t){var e=(0,i.G$)(t.preState.vel),r=(0,i.G$)((0,i.oF)(t.preState.pos,e)),a=(0,i.oF)(r,e);return{prograde:(0,i._O)(t.deltaV,e),normal:(0,i._O)(t.deltaV,r),radial:(0,i._O)(t.deltaV,a),date:t.preState.date}},t.maneuverComponentsToManeuver=function(t,e){var r=(0,i.G$)(e.vel),a=(0,i.G$)((0,i.oF)(e.pos,r)),o=(0,i.oF)(a,r),n=(0,i.sZ)((0,i.zy)(r,t.prograde),(0,i.sZ)((0,i.zy)(a,t.normal),(0,i.zy)(o,t.radial)));return{preState:e,postState:{date:e.date,pos:e.pos,vel:(0,i.sZ)(e.vel,n)},deltaV:n,deltaVMag:(0,i.G7)(n)}},t.rotateToInertialFromPerifocal=function(t,e){var r=e.ascNodeLongitude,a=e.inclination,o=e.argOfPeriapsis;return(0,i.HJ)(t,r,a,o)},t.rotateToPerifocalFromInertial=function(t,e){var r=e.ascNodeLongitude,a=e.inclination,o=e.argOfPeriapsis;return(0,i.HJ)(t,-o,-a,-r)},t.siderealPeriod=e,t.flightPathAngleAtTrueAnomaly=r,t.motionAngleAtTrueAnomaly=a,t.motionDirectionAtTrueAnomaly=n,t.distanceAtTrueAnomaly=s,t.distanceAtOrbitTrueAnomaly=function(t,e){return s(t,e.eccentricity,e.semiLatusRectum)},t.trueAnomalyAtDistance=function(t,e,r){return(0,i.ZF)((r/t-1)/e)},t.dateToMeanAnomaly=u,t.meanAnomalyToDate=c,t.trueToMeanAnomaly=l,t.meanToTrueAnomaly=h,t.dateToTrueAnomaly=v,t.trueAnomalyToDate=d,t.dateToOrbitTrueAnomaly=function(t,e){return v(t,e.eccentricity,e.siderealPeriod,e.meanAnomalyEpoch,e.epoch)},t.trueAnomalyToOrbitDate=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.epoch;return d(t,e.eccentricity,e.siderealPeriod,e.meanAnomalyEpoch,e.epoch,r)},t.angleInPlane=m,t.angleInOrbitPlane=function(t,e){return m(t,e.ascNodeLongitude,e.inclination,e.argOfPeriapsis)},t.positionAtTrueAnomaly=f,t.velocityAtTrueAnomaly=b,t.orbitToPositionAtDate=function(t,e){var r=t.eccentricity,a=t.meanAnomalyEpoch,i=t.epoch;return f(t,v(e,r,t.siderealPeriod,a,i))},t.orbitToVelocityAtDate=function(t,e,r){var a=t.eccentricity,i=t.meanAnomalyEpoch,o=t.epoch,n=t.siderealPeriod;return b(t,e.stdGravParam,v(r,a,n,i,o))},t.orbitToStateAtDate=function(t,e,r){var a=t.eccentricity,i=t.meanAnomalyEpoch,o=t.epoch,n=t.siderealPeriod,s=e.stdGravParam,u=v(r,a,n,i,o);return{date:r,pos:f(t,u),vel:b(t,s,u)}},t.stateToOrbit=function(t,r){var a=r.stdGravParam,o=t.pos,n=t.vel,s=(0,i.G7)(o),u=(0,i.A$)(n),c=t.date,h=1/(2/s-u/a),v=(0,i.oF)(o,n),d=(0,i.ZF)(v.z/(0,i.G7)(v)),f=(0,i.qK)((0,i.$_)((0,i.oF)(n,v),a),(0,i.$_)(o,s)),b=(0,i.G7)(f),p=(0,i.$_)(f,b);b<=1e-12&&(p=i.o7,b=0);var y=(0,i.oF)(i.gG,v),g=(0,i.G7)(y),M=(0,i.$_)(y,g);g<=1e-12&&(M=p,g=0);var A=(0,i.z7)((0,i.JG)((0,i.ZF)(M.x),M.y),0),Z=(0,i.z7)((0,i.JG)((0,i.ZF)((0,i._O)(M,p)),p.z),0),P=l((0,i.z7)(m(o,A,d,Z),0),b),T=h*(1-b*b),O=e(h,a);return{orbiting:r.id,semiMajorAxis:h,eccentricity:b,inclination:d,ascNodeLongitude:A,argOfPeriapsis:Z,meanAnomalyEpoch:P,epoch:c,semiLatusRectum:T,siderealPeriod:O}}}(a||(a={})),e.Z=a},2425:function(t,e,r){var a,i=r(724);!function(t){function e(t,e,i,o,n,s){for(var u=0,c=0,l=0,h=0,v=0,d=0,m=0;m<s;m++){var f=r(h,v,d,e,c=a(e,n,i),n),b=(h=f.DT)*h;if(e=u=e-(l=c-t)*(b-l*(v=f.DDT)/2)/(h*(b-l*v)+(d=f.DDDT)*l*l/6),Math.abs(e-u)<o)break}return e}function r(t,e,r,a,i,o){var n=o*o,s=n*o,u=1-a*a,c=Math.sqrt(1-n*u),l=c*c,h=l*c;return{DT:t=1/u*(3*i*a-2+2*s*a/c),DDT:e=1/u*(3*i+5*a*t+2*(1-n)*s/h),DDDT:1/u*(7*a*e+8*t-6*(1-n)*n*s*a/h/l)}}function a(t,e,r){var a=Math.abs(t-1);if(a<.2&&a>.01)return function(t,e,r){var a=1/(1-t*t);if(a>0){var o=2*Math.acos(t),n=2*Math.asin(Math.sqrt(e*e/a));return e<0&&(n=-n),a*Math.sqrt(a)*(o-Math.sin(o)-(n-Math.sin(n)*i.uo*r))/2}var s=2*Math.acosh(t),u=2*Math.asinh(Math.sqrt(-e*e/a));return e<0&&(u=-u),-a*Math.sqrt(-a)*(u-Math.sinh(u)-(s-Math.sinh(s)))/2}(t,e,r);var o=e*e,n=t*t-1,s=Math.abs(n),u=Math.sqrt(1+o*n);if(a<.01){var c=u-e*t,l=function(t,e){var r=1,a=1,i=1,o=0,n=0,s=0;for(;i>e;)n=r+(o=a*(3+s)*(1+s)/(2.5+s)*t/(s+1)),i=Math.abs(o),r=n,a=o,s++;return r}(.5*(1-e-t*c),1e-11);return(c*c*c*(l*=4/3)+4*e*c)/2+Math.PI*r/Math.pow(s,1.5)}var h=Math.sqrt(s),v=t*u-e*n,d=0;if(n<0){var m=Math.acos(v);d=Math.PI*r+m}else{var f=h*(u-e*t);d=Math.log(f+v)}return(t-e*u-d/h)/n}t.solve=function(t,o,n,s){var u,c,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],v=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=s.stdGravParam,m=(0,i.G7)(t),f=(0,i.G7)(o),b=(0,i.G7)((0,i.qK)(o,t)),p=.5*(m+f+b),y=(0,i.$_)(t,m),g=(0,i.$_)(o,f),M=(0,i.G$)((0,i.oF)(y,g)),A=1-b/p,Z=Math.sqrt(A);M.z<0?(Z=-Z,u=(0,i.oF)(y,M),c=(0,i.oF)(g,M)):(u=(0,i.oF)(M,y),c=(0,i.oF)(M,g)),u=(0,i.G$)(u),c=(0,i.G$)(c),h&&(Z=-Z,u=(0,i.zy)(u,-1),c=(0,i.zy)(c,-1));var P,T=Z*A,O=Math.sqrt(2*d/(p*p*p))*n,D=O/Math.PI,S=Math.acos(Z)+Z*Math.sqrt(1-A),x=S+D*Math.PI,j=2/3*(1-T),G=0,F=0,I=0,N={DT:G,DDT:F,DDDT:I};if(D>0&&O>x){for(var q=0,R=x,w=0,z=0;G=(N=r(G,F,I,w,R,Z)).DT,F=N.DDT,I=N.DDDT,0!==G&&(z=w-G*F/(F*F-G*I/2)),!(Math.abs(w-z)<1e-13||q>12);)R=a(R,z,D),w=z,q++;R>O&&(D-=1)}if(0===(D=l<D?l:D)){P=e(O,O>=S?-(O-S)/(O-S+4):O<=j?j*(j-O)/(.4*(1-A*T)*O)+1:Math.pow(O/S,.6931471805599453/Math.log(j/S))-1,0,1e-15,Z,15)}else{var E=0;P=e(O,P=((E=v?Math.pow((D*Math.PI+Math.PI)/(8*O),2/3):Math.pow(8*O/(D*Math.PI),2/3))-1)/(E+1),D,1e-8,Z,15)}var $=Math.sqrt(d*p/2),L=(m-f)/b,V=Math.sqrt(1-L*L),_=Math.sqrt(1-A+A*P*P),k=$*(Z*_-P-L*(Z*_+P))/m,U=-$*(Z*_-P+L*(Z*_+P))/f,H=$*V*(_+Z*P),C=H/m,K=H/f,J=(0,i.sZ)((0,i.zy)(y,k),(0,i.zy)(u,C)),B=(0,i.sZ)((0,i.zy)(g,U),(0,i.zy)(c,K));return{v1:J,v2:B}},t.psolve=function(t,e,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],n=a.stdGravParam,s=(0,i.G7)(t),u=(0,i.G7)(e),c=Math.atan2((0,i.G7)((0,i.oF)(t,e)),(0,i._O)(t,e));c=o?-c:c;var l=(0,i.G$)((0,i.oF)(t,e));l.z<0&&(c=i.uo-c);var h,v,d=s*u*(1-Math.cos(c)),m=s+u,f=s*u*(1+Math.cos(c)),b=d/(m+Math.sqrt(2*f)),p=d/(m-Math.sqrt(2*f));c>Math.PI?(h=0,v=p):(h=b,v=1/0);for(var y=1e-12,g=1e3*y,M=200,A=0,Z=y+1,P=(b+p)/2,T=P,O=0,D=0,S=0,x=0;Z>y&&A<M;){A++,O=0===(O=f*d*(P=T)/(P*P*(2*f-m*m)+2*d*m*P-d*d))?1e-100:O,D=1-u/P*(1-Math.cos(c)),S=s*u*Math.sin(c)/Math.sqrt(n*P);var j=void 0,G=void 0;if(x=Math.sqrt(n/P)*Math.tan(c/2)*((1-Math.cos(c))/P-1/s-1/u),O>0){var F=-s*u*x/Math.sqrt(n*O),I=1-s/O*(1-D),N=(0,i.z7)(Math.atan2(F,I)),q=Math.sqrt(O*O*O/n);G=-S/2/P-1.5*O*((j=S+q*(N-F))-S)*(d*d+(2*f-m*m)*P*P)/(f*d*P*P)+q*(2*d*F)/(P*(d-m*P))}else{var R=Math.acosh(1-s/O*(1-D)),w=Math.sqrt(-O*O*O/n);G=-S/2/P-1.5*O*((j=S+w*(Math.sinh(R)-R))-S)*(d*d+(2*f-m*m)*P*P)/(f*d*P*P)-w*(2*d*Math.sinh(R))/(P*(d-m*P))}Z=Math.abs(r-j)/r,(T=P+(r-j)/G)<h?T=(P+h)/2:T>v&&(T=(P+v)/2)}Z>g&&console.log("Lambert p-iteration failed to converge. error: %f",Z);var z=(0,i.$_)((0,i.qK)(e,(0,i.zy)(t,D)),S),E=(0,i.sZ)((0,i.zy)(t,x),(0,i.zy)(z,S));return{v1:z,v2:E}}}(a||(a={})),e.Z=a},4067:function(t,e,r){r.d(e,{v$:function(){return i},ri:function(){return o},Zg:function(){return n},c4:function(){return u}});var a=(1+Math.sqrt(5))/2;function i(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-12,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,o=2*Number.EPSILON,n=e,s=r,u=t(n),c=t(s);if(Math.sign(u)===Math.sign(c))throw new Error("The provided bounds do not bracket a root.");if(Math.abs(u)<Math.abs(c)){var l=n;n=s,s=l;var h=u;u=c,c=h}for(var v=n,d=u,m=v,f=!0,b=0,p=1,y=i;y;){if(y--,Math.abs(s-n)<a)return s;if(Math.abs(c)<o)return s;b=0,b=Math.abs(u-d)>o&&Math.abs(c-d)>o?n*c*d/((u-c)*(u-d))+s*u*d/((c-u)*(c-d))+v*u*c/((d-u)*(d-c)):s-d*((s-n)/(c-u));var g=Math.abs(o*s),M=Math.abs(b-s),A=Math.abs(s-v),Z=Math.abs(v-m);if((b-(3*n+s)/4)*(b-s)>=0||f&&M>=A/2||!f&&M>=Z/2||f&&A<g||!f&&Z<g?(b=(n+s)/2,f=!0):f=!1,p=t(b),Math.abs(p)<o)return b;if(m=v,v=s,Math.sign(u)!==Math.sign(p)?(s=b,c=p):(n=b,u=p),Math.abs(u)<Math.abs(c)){var P=n;n=s,s=P;var T=u;u=c,c=T}}return b}function o(t,e,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,n=2-a,s=i,u=e,c=r,l=c-u,h=u+n*l,v=h,d=v,m=t(d),f=t(v),b=t(h),p=0,y=0,g=(u+c)/2,M=0,A=0,Z=0,P=0,T=0,O=o;O;){if(O--,l<i)return g;Z=.5*(M=(v-h)*(v-h)*(b-m)+(d-h)*(d-h)*(f-b))/(A=(v-h)*(b-m)+(d-h)*(f-b)),0===A||u>p||p>c||Math.abs(M/A)>.5*Math.abs(T)||Math.abs(T)<s?P=n*(T=h<g?c-h:u-h):(T=P,P=Z),(y=t(p=h+P))<=b?(u=p<h?u:h,c=p<h?h:c,d=v,v=h,h=p,m=f,f=b,b=y):(u=p<h?p:u,c=p<h?c:p,y<=f||v===h?(d=v,v=p,m=f,f=y):(y<=m||d===h||d===v)&&(d=p,m=y)),l=c-u,g=(u+c)/2}return g}function n(t,e,r,a){for(var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,n=0,s=r,u=a+1;u>a&&n<o;)i=s,s-=t(s)/e(s),u<(u=Math.abs(s-i))&&(s=(s+i)/2),n++;return n>=o&&console.log("Newton's method failed to find a root. Error of %f. ",u),s}function s(t,e){return t.objx-e.objx}function u(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250*t[0].length,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.5,c=t[0].length,l=[],h=t[0].slice(),v=h.slice(),d=h.slice(),m=h.slice(),f=0;f<=c;f++)l.push({x:t[f],objx:e(t[f])});for(var b=0;b<a&&(l.sort(s),!(l[0].objx<r));b++){for(var p=0;p<=c;p++){h[p]=0;for(var y=0;y<c;y++)h[p]=h[p]+l[y].x[p];h[p]=h[p]/c}for(var g=0;g<c;g++)v[g]=h[g]+i*(h[g]-l[c].x[g]);var M=e(v);if(M<l[c-1].objx&&M>=l[0].objx)l[c].x=v.slice(),l[c].objx=M;else if(M<l[0].objx){for(var A=0;A<c;A++)m[A]=h[A]+o*(v[A]-h[A]);var Z=e(m);Z<M?(l[c].x=m.slice(),l[c].objx=Z):(l[c].x=v.slice(),l[c].objx=M)}else{if(M>l[c].objx){for(var P=0;P<c;P++)d[P]=h[P]+n*(l[c].x[P]-h[P]);var T=e(d);if(T<l[c].objx){l[c].x=d.slice(),l[c].objx=T;continue}}else{for(var O=0;O<c;O++)d[O]=h[O]+n*(v[O]-h[O]);var D=e(d);if(D<M){l[c].x=d.slice(),l[c].objx=D;continue}}for(var S=1;S<=c;S++){for(var x=1;x<c;x++)l[S].x[x]=l[0].x[x]+u*(l[S].x[x]-l[0].x[x]);l[S].objx=e(l[S].x)}}}return l[0].x}},8034:function(t,e,r){var a,i=r(8818),o=r(2425),n=r(6752),s=r(724),u=r(1684);!function(t){function e(t,e){if(0===e)return t.sun;var r=t.orbiterIds.get(e);if(!r)throw new Error("No body with id ".concat(e));return r}t.transferTrajectory=function(t,e,r,a,n,u,c){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,s.R3)(0,0,0),h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:(0,s.R3)(0,0,0),v=i.Z.orbitToStateAtDate(t,r,a),d=i.Z.orbitToStateAtDate(e,r,u),m=(0,s.sZ)(v.pos,l),f=(0,s.sZ)(d.pos,h);if(c){var b=i.Z.rotateToPerifocalFromInertial(f,t);b=i.Z.rotateToInertialFromPerifocal((0,s.R3)(b.x,b.y,0),t);var p=o.Z.solve(m,b,n,r),y=p.v1,g=i.Z.stateToOrbit({date:a,pos:m,vel:y},r),M=i.Z.angleInOrbitPlane(m,g),A=i.Z.angleInOrbitPlane(b,g),Z=M+Math.max(0,(0,s.z7)(A-M)-s.pj),P=i.Z.trueAnomalyToOrbitDate(Z,g,a),T={date:P,pos:i.Z.positionAtTrueAnomaly(g,Z),vel:i.Z.velocityAtTrueAnomaly(g,r.stdGravParam,Z)},O=(0,s.G$)((0,s.oF)(T.pos,T.vel)),D=(0,s.G$)((0,s.oF)(T.pos,f)),S=(0,s.ZF)((0,s._O)(O,D)),x=0===S?s.gG:(0,s.G$)((0,s.oF)(O,D));x=isNaN(x.x)?s.gG:x;var j=(0,s.oU)(T.vel,x,S),G={date:P,pos:T.pos,vel:j},F=i.Z.stateToOrbit(G,r),I={date:a,pos:m,vel:y},N=i.Z.orbitToStateAtDate(F,r,u);if(isNaN(N.pos.x)){var q=i.Z.angleInOrbitPlane(f,F);N={date:u,pos:f,vel:i.Z.velocityAtTrueAnomaly(F,r.stdGravParam,q)}}var R=i.Z.maneuverFromOrbitalStates(v,I),w=i.Z.maneuverFromOrbitalStates(N,d),z=i.Z.maneuverFromOrbitalStates(T,G),E={orbits:[g,F],intersectTimes:[a,P,u],maneuvers:[R,z,w]};return E}var $=o.Z.solve(m,f,n,r),L=$.v1,V=$.v2,_={date:a,pos:m,vel:L},k={date:u,pos:f,vel:V},U=i.Z.maneuverFromOrbitalStates(v,_),H=i.Z.maneuverFromOrbitalStates(k,d),C={orbits:[i.Z.stateToOrbit({date:a,pos:m,vel:L},r)],intersectTimes:[a,u],maneuvers:[U,H]};return C},t.ejectionTrajectories=function(t,r,a,o,c){for(var l,h,v,d,m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"fastdirect",b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.slice(-1).map((function(t){return(0,s.R3)(0,0,0)})),p=[],y=c,g=o.length-1,M=g-1;M>=0;M--){var A=e(t,o[M]),Z=e(t,o[M+1]);if(0===M)h=r;else{var P=e(t,o[M-1]);h=P.orbit}if(M===g-1)l=a,v=i.Z.orbitToVelocityAtDate(l,Z,y),d=i.Z.orbitToVelocityAtDate(A.orbit,Z,y);else{var T=p[p.length-1];l=T.orbits[0],v=T.maneuvers[0].postState.vel,y=T.maneuvers[0].postState.date,d=T.maneuvers[0].preState.vel}var O=(0,s.qK)(v,d),D=M>0||m,S=f;if("fastoberth"===S){var x=A.soi,j=A.stdGravParam,G=(0,s.A$)(O),F=h.semiMajorAxis,I=u.Z.minFlybyRadius(A),N=G/2-j/x,q=Math.sqrt(j/F),R=(F-I)/(I+F),w=I/(1-R),z=-j/(2*w),E=Math.sqrt(2*(z+j/I)),$=Math.sqrt(2*(N+j/I)),L=Math.sqrt(2*(z+j/F)),V=Math.sqrt(2*(N+j/F)),_=Math.abs(q-V),k=Math.abs($-E)+Math.abs(L-q);_<k&&(S="fastdirect")}var U=0===M?(0,s.R3)(0,0,0):b[M-1],H="fastdirect"===S?n.Z.fastDeparture(h,A,O,y,D):"direct"===S?n.Z.optimalDeparture(h,A,O,y,D,"direct",U):"fastoberth"===S?n.Z.fastOberthDeparture(h,A,O,y,D,U):"oberth"===S?n.Z.optimalDeparture(h,A,O,y,D,"oberth",U):n.Z.fastDeparture(h,A,O,y,D);if(M>0&&"fastdirect"===S&&(0,s.G7)(U)>0){var C=n.Z.departArriveForPosition((0,s.sZ)(H.maneuvers[0].preState.pos,U),A,O,y,1).orbit,K=i.Z.angleInOrbitPlane(H.maneuvers[0].preState.pos,h),J=i.Z.trueAnomalyToOrbitDate(K,h,C.epoch-h.siderealPeriod/2),B=y+J-C.epoch;C.epoch=J;var Q=i.Z.velocityAtTrueAnomaly(h,A.stdGravParam,K),W={date:J,pos:H.maneuvers[0].preState.pos,vel:Q},X=i.Z.orbitToStateAtDate(C,A,C.epoch),Y=i.Z.maneuverFromOrbitalStates(W,X);H={orbits:[C],intersectTimes:[J,B],maneuvers:[Y]}}p.push(H)}return p.reverse()},t.insertionTrajectories=function(t,r,a,o,c){for(var l,h,v,d,m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"fastdirect",b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.slice(0,-1).map((function(t){return(0,s.R3)(0,0,0)})),p=[],y=c,g=o.length-1,M=0;M<g;M++){var A=e(t,o[M+1]),Z=e(t,o[M]);if(M===g-1)h=r;else{var P=e(t,o[M+2]);h=P.orbit}if(0===M)l=a,v=i.Z.orbitToVelocityAtDate(l,Z,y),d=i.Z.orbitToVelocityAtDate(A.orbit,Z,y);else{var T=p[p.length-1],O=T.orbits.length,D=T.maneuvers.length;l=T.orbits[O-1],v=T.maneuvers[D-1].preState.vel,y=T.maneuvers[D-1].preState.date,d=T.maneuvers[D-1].postState.vel}var S=(0,s.qK)(v,d),x=M<g-1||m,j=f;if("fastoberth"===j){var G=A.soi,F=A.stdGravParam,I=(0,s.A$)(S),N=h.semiMajorAxis,q=u.Z.minFlybyRadius(A),R=I/2-F/G,w=Math.sqrt(F/N),z=(N+q)/2,E=-F/(2*z),$=Math.sqrt(2*(E+F/q)),L=Math.sqrt(2*(R+F/q)),V=Math.sqrt(2*(E+F/N)),_=Math.sqrt(2*(R+F/N)),k=Math.abs(w-_),U=Math.abs(L-$)+Math.abs(V-w);k<U&&(j="fastdirect")}var H=M===g-1?(0,s.R3)(0,0,0):b[M+1],C="fastdirect"===j?n.Z.fastArrival(h,A,S,y,x):"direct"===j?n.Z.optimalArrival(h,A,S,y,x,"direct",H):"fastoberth"===j?n.Z.fastOberthArrival(h,A,S,y,x,H):"oberth"===j?n.Z.optimalArrival(h,A,S,y,x,"oberth",H):n.Z.fastArrival(h,A,S,y,x);if(M<g&&"fastdirect"===j&&(0,s.G7)(H)>0){var K=C.maneuvers.length,J=n.Z.departArriveForPosition((0,s.sZ)(C.maneuvers[K-1].postState.pos,H),A,S,y,-1).orbit,B=i.Z.angleInOrbitPlane(C.maneuvers[K-1].postState.pos,h),Q=i.Z.trueAnomalyToOrbitDate(B,h,J.epoch-h.siderealPeriod/2),W=y+Q-J.epoch;J.epoch=Q;var X=i.Z.velocityAtTrueAnomaly(h,A.stdGravParam,B),Y={date:Q,pos:C.maneuvers[K-1].postState.pos,vel:X},tt=i.Z.orbitToStateAtDate(J,A,J.epoch),et=i.Z.maneuverFromOrbitalStates(tt,Y);C={orbits:[J],intersectTimes:[W,Q],maneuvers:[et]}}p.push(C)}return p}}(a||(a={})),e.Z=a},7531:function(t,e,r){r.d(e,{CK:function(){return v},sn:function(){return d},VM:function(){return m}});var a=r(1413),i=r(5807),o=r(1120),n=r(136),s=r(9388),u=r(5671),c=r(3144),l=r(7487),h=r(2763),v=function(){function t(e){(0,u.Z)(this,t),this.id=void 0,this.name=void 0,this.radius=void 0,this.atmosphereHeight=void 0,this.mass=void 0,this.stdGravParam=void 0,this.soi=void 0,this.color=void 0,this.orbiters=[],this.id=e.id,this.name=e.name,this.radius=e.radius,this.atmosphereHeight=e.atmosphereHeight,this.mass=e.mass,this.stdGravParam=e.stdGravParam,this.soi=e.soi,this.color=new h.Z(e.color)}return(0,c.Z)(t,[{key:"data",get:function(){return{id:this.id,name:this.name,radius:this.radius,atmosphereHeight:this.atmosphereHeight,mass:this.mass,stdGravParam:this.stdGravParam,soi:this.soi,color:this.color}}},{key:"orbiterIds",get:function(){for(var t=[],e=0;e<this.orbiters.length;e++)t.push(this.orbiters[e].id);return t}},{key:"furtherstOrbiterDistance",get:function(){for(var t=0,e=0;e<this.orbiters.length;e++){var r=this.orbiters[e].orbit,a=r.semiMajorAxis*(1+r.eccentricity);t=Math.max(a,t)}return t}}]),t}(),d=function(t){(0,n.Z)(r,t);var e=(0,s.Z)(r);function r(t,a){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u.Z)(this,r),(i=e.call(this,t)).attractor=a,i.orbit=void 0,i.orbiting=void 0,i.orbit=new l.Z(t.orbit,i.attractor,o),i.orbiting=t.orbiting,i}return(0,c.Z)(r,[{key:"data",get:function(){return(0,a.Z)((0,a.Z)({},(0,i.Z)((0,o.Z)(r.prototype),"data",this)),{},{orbit:this.orbit.data,orbiting:this.orbiting})}}]),r}(v);function m(t){return void 0!==t.orbiting}},2763:function(t,e,r){var a=r(5671),i=r(3144),o=function(){function t(e){(0,a.Z)(this,t),this.r=void 0,this.g=void 0,this.b=void 0,this.a=void 0,this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a?e.a:1}return(0,i.Z)(t,[{key:"rescale",value:function(e){return new t({r:Math.max(Math.min(e*this.r,255),0),g:Math.max(Math.min(e*this.g,255),0),b:Math.max(Math.min(e*this.b,255),0),a:this.a})}},{key:"toString",value:function(){return"rgba(".concat(this.r.toString(),",",this.g.toString(),",",this.b.toString(),",",this.a.toString(),")")}}]),t}();e.Z=o},7487:function(t,e,r){var a=r(5671),i=r(3144),o=r(8818),n=r(724),s=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.Z)(this,t),this.semiMajorAxis=void 0,this.apoapsis=void 0,this.periapsis=void 0,this.eccentricity=void 0,this.inclination=void 0,this.argOfPeriapsis=void 0,this.ascNodeLongitude=void 0,this.meanAnomalyEpoch=void 0,this.epoch=void 0,this.semiLatusRectum=void 0,this.siderealPeriod=void 0,this.orbiting=void 0,this.attractorSoi=void 0,this.attractorStdGravParam=void 0,this.semiMajorAxis=e.semiMajorAxis,this.eccentricity=e.eccentricity,this.meanAnomalyEpoch=e.meanAnomalyEpoch,this.epoch=e.epoch,i?(this.inclination=(0,n.Id)(e.inclination),this.argOfPeriapsis=(0,n.Id)(e.argOfPeriapsis),this.ascNodeLongitude=(0,n.Id)(e.ascNodeLongitude)):(this.inclination=e.inclination,this.argOfPeriapsis=e.argOfPeriapsis,this.ascNodeLongitude=e.ascNodeLongitude),this.eccentricity<1?(this.periapsis=this.semiMajorAxis*(1-this.eccentricity),this.apoapsis=this.semiMajorAxis*(1+this.eccentricity)):this.periapsis=this.semiMajorAxis*(this.eccentricity-1),e.semiLatusRectum?this.semiLatusRectum=e.semiLatusRectum:this.semiLatusRectum=this.semiMajorAxis*(1-this.eccentricity*this.eccentricity),e.siderealPeriod?this.siderealPeriod=e.siderealPeriod:this.siderealPeriod=o.Z.siderealPeriod(e.semiMajorAxis,r.stdGravParam),this.orbiting="orbiting"in e?e.orbiting:r.id,this.attractorSoi=r.soi,this.attractorStdGravParam=r.stdGravParam}return(0,i.Z)(t,[{key:"data",get:function(){return{orbiting:this.orbiting,semiMajorAxis:this.semiMajorAxis,apoapsis:this.apoapsis,periapsis:this.periapsis,eccentricity:this.eccentricity,inclination:this.inclination,argOfPeriapsis:this.argOfPeriapsis,ascNodeLongitude:this.ascNodeLongitude,meanAnomalyEpoch:this.meanAnomalyEpoch,epoch:this.epoch,semiLatusRectum:this.semiLatusRectum,siderealPeriod:this.siderealPeriod}}}],[{key:"fromOrbitalElements",value:function(e,r){return new t(o.Z.orbitFromElements(e,r),r)}}]),t}();e.Z=s},4940:function(t,e,r){var a=r(7762),i=r(2982),o=r(5671),n=r(3144),s=r(7531),u=function(){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,o.Z)(this,t),this.sun=void 0,this.orbiters=void 0,this.orbiterIds=void 0,this.orbiters=[],this.orbiterIds=new Map,this.sun=new s.CK(e);for(var i=0;i<r.length;i++){var n=r[i],u=0===n.orbiting?this.sun:this.orbiterIds.get(n.orbiting),c=new s.sn(n,u,a);this.orbiterIds.set(c.id,c),u.orbiters.push(c),this.orbiters.push(c)}}return(0,n.Z)(t,[{key:"orbiting",get:function(){return(0,i.Z)(this.orbiterIds.values())}},{key:"bodies",get:function(){return[this.sun].concat((0,i.Z)(this.orbiters))}},{key:"data",get:function(){var t,e=[],r=(0,a.Z)(this.bodies);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.push(i.data)}}catch(o){r.e(o)}finally{r.f()}return e}},{key:"size",get:function(){return 1+this.orbiterIds.size}},{key:"bodyFromName",value:function(t){for(var e=0,r=[this.sun].concat((0,i.Z)(this.orbiters));e<r.length;e++){var a=r[e];if(a.name===t)return a}throw new Error("No body with name ".concat(t))}},{key:"bodyFromId",value:function(t){if(0===t)return this.sun;var e=this.orbiterIds.get(t);if(!e)throw new Error("No body with id ".concat(t));return e}},{key:"sequenceToSun",value:function(t){for(var e=this.bodyFromId(t),r=[e.id];(0,s.VM)(e);)e=this.bodyFromId(e.orbiting),r.push(e.id);return r}},{key:"commonAttractorId",value:function(t,e){for(var r=this.sequenceToSun(t),a=this.sequenceToSun(e),i=0;i<r.length;i++)if(a.includes(r[i]))return r[i];throw new Error("Bodies do not share a common attractor (error in defining this SolarSystem)")}}]),t}();e.Z=u},907:function(t,e,r){function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,{Z:function(){return a}})},7326:function(t,e,r){function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.d(e,{Z:function(){return a}})},5671:function(t,e,r){function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,{Z:function(){return a}})},3144:function(t,e,r){function a(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,{Z:function(){return i}})},7762:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(181);function i(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(0,a.Z)(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,n=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw n}}}}},9388:function(t,e,r){r.d(e,{Z:function(){return n}});var a=r(1120),i=r(8814),o=r(2963);function n(t){var e=(0,i.Z)();return function(){var r,i=(0,a.Z)(t);if(e){var n=(0,a.Z)(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return(0,o.Z)(this,r)}}},4942:function(t,e,r){function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return a}})},5807:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(8415);function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=(0,a.Z)(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},i.apply(this,arguments)}},1120:function(t,e,r){function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}r.d(e,{Z:function(){return a}})},136:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(9611);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,a.Z)(t,e)}},8814:function(t,e,r){function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}r.d(e,{Z:function(){return a}})},1413:function(t,e,r){r.d(e,{Z:function(){return o}});var a=r(4942);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},2963:function(t,e,r){r.d(e,{Z:function(){return o}});var a=r(1002),i=r(7326);function o(t,e){if(e&&("object"===(0,a.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(t)}},9611:function(t,e,r){function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}r.d(e,{Z:function(){return a}})},8415:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(1120);function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,a.Z)(t)););return t}},2982:function(t,e,r){r.d(e,{Z:function(){return o}});var a=r(907);var i=r(181);function o(t){return function(t){if(Array.isArray(t))return(0,a.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(t,e,r){function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}r.d(e,{Z:function(){return a}})},181:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(907);function i(t,e){if(t){if("string"===typeof t)return(0,a.Z)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,a.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=774.7fa2af5c.chunk.js.map