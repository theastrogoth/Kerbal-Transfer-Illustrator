!function(){"use strict";var t={724:function(t,n,e){e.d(n,{o7:function(){return i},Nb:function(){return r},gG:function(){return s},uo:function(){return o},pj:function(){return a},SX:function(){return h},uZ:function(){return u},Id:function(){return c},z7:function(){return d},ZF:function(){return f},JG:function(){return y},EO:function(){return m},t7:function(){return l},R3:function(){return _},zy:function(){return v},$_:function(){return b},sZ:function(){return g},qK:function(){return p},_O:function(){return M},oF:function(){return T},A$:function(){return x},G7:function(){return O},G$:function(){return I},oU:function(){return B},N2:function(){return D},Nx:function(){return S},HJ:function(){return k},jE:function(){return w},io:function(){return z}});var i=_(1,0,0),r=_(0,1,0),s=_(0,0,1),o=2*Math.PI,a=.5*Math.PI;function h(t,n,e){if(1===(e=Math.floor(e)))return[n];var i=(n-t)/(e-1),r=new Array(e);r[0]=t;for(var s=1;s<e;s++)r[s]=r[s-1]+i;return r}function u(t,n,e){return t>e?e:t<n?n:t}function c(t){return t*Math.PI/180}function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=n+o;if(n<=t&&t<e)return t;var i=Math.floor((t-n)/o);return t-o*i}function f(t){return Math.acos(u(t,-1,1))}function y(t,n){return function(t){return t<0}(n)?-t:t}function m(){return 2*Math.round(Math.random())-1}function l(t,n,e){return t+e*(n-t)}function _(t,n,e){return{x:t,y:n,z:e}}function v(t,n){return{x:t.x*n,y:t.y*n,z:t.z*n}}function b(t,n){return{x:t.x/n,y:t.y/n,z:t.z/n}}function g(t,n){return{x:t.x+n.x,y:t.y+n.y,z:t.z+n.z}}function p(t,n){return{x:t.x-n.x,y:t.y-n.y,z:t.z-n.z}}function M(t,n){return t.x*n.x+t.y*n.y+t.z*n.z}function T(t,n){return{x:t.y*n.z-t.z*n.y,y:t.z*n.x-t.x*n.z,z:t.x*n.y-t.y*n.x}}function x(t){return M(t,t)}function O(t){return Math.sqrt(x(t))}function I(t){return b(t,O(t))}function B(t,n,e){var i=Math.cos(e),r=Math.sin(e),s=v(t,i),o=v(T(n,t),r),a=v(n,M(n,t)*(1-i));return g(g(s,o),a)}function D(t,n){var e=I(t),i=I(n);return{axis:I(T(t,n)),angle:f(M(e,i))}}function S(t,n,e){var r=D(e,_(0,0,1)),s=r.axis,o=r.angle;isNaN(s.x)&&(s=i);var a=B(t,s,o),h=B(n,s,o),u=Math.atan2(a.y,a.x);return d(Math.atan2(h.y,h.x)-u)}function k(t,n,e,i){var r=Math.cos(n),s=Math.cos(e),o=Math.cos(i),a=Math.sin(n),h=Math.sin(e),u=Math.sin(i);return{x:(r*o-a*s*u)*t.x+(-r*u-a*s*o)*t.y+a*h*t.z,y:(a*o+r*s*u)*t.x+(r*s*o-a*u)*t.y+-r*h*t.z,z:h*u*t.x+h*o*t.y+s*t.z}}function w(t){return{r:O(t),theta:Math.atan2(Math.sqrt(t.x*t.x+t.y*t.y),t.z),phi:Math.atan2(t.y,t.x)}}function z(t){return{x:t.r*Math.cos(t.phi)*Math.sin(t.theta),y:t.r*Math.sin(t.phi)*Math.sin(t.theta),z:t.r*Math.cos(t.theta)}}},3936:function(t,n,e){var i=e(2982),r=e(5671),s=e(3144),o=e(6939),a=e(724),h=e(4940),u=e(7487),c=function(){function t(n){(0,r.Z)(this,t),this.system=void 0,this.startOrbit=void 0,this.endOrbit=void 0,this.startDates=void 0,this.flightTimes=void 0,this.deltaVs=void 0,this.ejectionInsertionType=void 0,this.planeChange=void 0,this.noInsertionBurn=void 0,this.matchStartMo=void 0,this.matchEndMo=void 0,this.system=new h.Z(n.system.sun,n.system.orbiters),this.startOrbit=new u.Z(n.startOrbit,this.system.bodyFromId(n.startOrbit.orbiting)),this.endOrbit=new u.Z(n.endOrbit,this.system.bodyFromId(n.endOrbit.orbiting)),this.startDates=n.startDates,this.flightTimes=n.flightTimes,this.deltaVs=n.deltaVs,this.ejectionInsertionType=n.ejectionInsertionType,this.planeChange=n.planeChange,this.matchStartMo=n.matchStartMo,this.matchEndMo=n.matchEndMo,this.noInsertionBurn=n.noInsertionBurn}return(0,s.Z)(t,[{key:"startBody",get:function(){return this.system.bodyFromId(this.startOrbit.orbiting)}},{key:"endBody",get:function(){return this.system.bodyFromId(this.endOrbit.orbiting)}},{key:"bestTimes",get:function(){for(var t=1/0,n=-1,e=-1,i=0;i<this.deltaVs.length;i++)for(var r=0;r<this.deltaVs[i].length;r++)this.deltaVs[i][r]<t&&(t=this.deltaVs[i][r],n=i,e=r);return{bestStartDate:this.startDates[e],bestFlightTime:this.flightTimes[n]}}},{key:"bestTransfer",get:function(){var t=this.bestTimes,n=new o.Z({system:this.system,startOrbit:this.startOrbit,endOrbit:this.endOrbit,startDate:t.bestStartDate,flightTime:t.bestFlightTime,startBody:this.startBody,endBody:this.endBody,planeChange:this.planeChange,matchStartMo:this.matchStartMo,matchEndMo:this.matchEndMo,noInsertionBurn:this.noInsertionBurn});return n.computeTransfer(),n.transfer}}]),t}(),d=function(){function t(n){(0,r.Z)(this,t),this._system=void 0,this._sequenceUp=void 0,this._sequenceDown=void 0,this._startOrbit=void 0,this._endOrbit=void 0,this._startBody=void 0,this._endBody=void 0,this._transferBody=void 0,this._startDateMin=void 0,this._startDateMax=void 0,this._startDates=void 0,this._nTimes=void 0,this._ejectionInsertionType=void 0,this._planeChange=void 0,this._matchStartMo=void 0,this._matchEndMo=void 0,this._noInsertionBurn=void 0,this._flightTimeMin=void 0,this._flightTimeMax=void 0,this._flightTimes=void 0,this._deltaVs=void 0,this._system=n.system,this._startOrbit=n.startOrbit,this._endOrbit=n.endOrbit,this._startBody=this.bodyFromId(this._startOrbit.orbiting),this._endBody=this.bodyFromId(this._endOrbit.orbiting),this._startDateMin=n.startDateMin,this._startDateMax=n.startDateMax,this._flightTimeMin=n.flightTimeMin,this._flightTimeMax=n.flightTimeMax,this._nTimes=n.nTimes,this._ejectionInsertionType=void 0===n.ejectionInsertionType?"fastdirect":n.ejectionInsertionType,this._planeChange=void 0!==n.planeChange&&n.planeChange,this._matchStartMo=void 0===n.matchStartMo||n.matchStartMo,this._matchEndMo=void 0!==n.matchEndMo&&n.matchEndMo,this._noInsertionBurn=void 0!==n.noInsertionBurn&&n.noInsertionBurn}return(0,s.Z)(t,[{key:"deltaVMatrix",get:function(){return this._deltaVs}},{key:"startDates",get:function(){return this._startDates}},{key:"flightTimes",get:function(){return this._flightTimes}},{key:"data",get:function(){return{system:this._system,startOrbit:this._startOrbit,endOrbit:this._endOrbit,startDates:this._startDates,flightTimes:this._flightTimes,deltaVs:this._deltaVs,ejectionInsertionType:this._ejectionInsertionType,planeChange:this._planeChange,matchStartMo:this._matchStartMo,matchEndMo:this._matchEndMo,noInsertionBurn:this._noInsertionBurn}}},{key:"porkchop",get:function(){return new c(this.data)}},{key:"bestTimes",get:function(){for(var t=1/0,n=-1,e=-1,i=0;i<this._deltaVs.length;i++)for(var r=0;r<this._deltaVs[i].length;r++)this._deltaVs[i][r]<t&&(t=this._deltaVs[i][r],n=i,e=r);return{bestStartDate:this.startDates[e],bestFlightTime:this.flightTimes[n]}}},{key:"bestTransfer",get:function(){var t=this.bestTimes;return new o.Z({system:this._system,startOrbit:this._startOrbit,endOrbit:this._endOrbit,startDate:t.bestStartDate,flightTime:t.bestFlightTime,startBody:this._startBody,endBody:this._endBody,ejectionInsertionType:this._ejectionInsertionType,planeChange:this._planeChange,matchStartMo:this._matchStartMo,matchEndMo:this._matchEndMo,noInsertionBurn:this._noInsertionBurn}).data}},{key:"computeAllDeltaVs",value:function(){var t=this,n=this._startBody.id,e=this._endBody.id,r=this.commonAttractorId(n,e);this._transferBody=this.bodyFromId(r),this.computeSequenceUp(),this.computeSequenceDown(),this.prepareTimes();for(var s=(0,i.Z)(Array(this._nTimes)).map((function(n){return Array(t._nTimes).fill(1/0)})),o=0;o<this._nTimes;o++)for(var a=this._startDates[o],h=0;h<this._nTimes;h++){var u=this._flightTimes[h],c=this.computeTransferDeltaV(a,u);s[h][o]=c}this._deltaVs=s}},{key:"computeTransferDeltaV",value:function(t,n){return new o.Z({system:this._system,startOrbit:this._startOrbit,endOrbit:this._endOrbit,startDate:t,flightTime:n,sequenceUp:this._sequenceUp,sequenceDown:this._sequenceDown,startBody:this._startBody,endBody:this._endBody,transferBody:this._transferBody,ejectionInsertionType:this._ejectionInsertionType,planeChange:this._planeChange,matchStartMo:this._matchStartMo,matchEndMo:this._matchEndMo,noInsertionBurn:this._noInsertionBurn}).deltaV}},{key:"bodyFromId",value:function(t){if(0===t)return this._system.sun;var n=this._system.orbiterIds.get(t);if(!n)throw new Error("No body with id ".concat(t));return n}},{key:"sequenceToSun",value:function(t){for(var n=this.bodyFromId(t),e=[n.id];n.hasOwnProperty("orbiting");)n=this.bodyFromId(n.orbiting),e.push(n.id);return e}},{key:"commonAttractorId",value:function(t,n){for(var e=this.sequenceToSun(t),i=this.sequenceToSun(n),r=0;r<e.length;r++)if(i.includes(e[r]))return e[r];throw new Error("Bodies do not share a common attractor (error in defining this SolarSystem)")}},{key:"computeSequenceUp",value:function(){for(var t=this._startBody,n=[this._startBody.id];t.id!==this._transferBody.id;){if(!t.hasOwnProperty("orbiting"))throw new Error("The start body does not orbit around the transfer body");t=this.bodyFromId(t.orbiting),n.push(t.id)}this._sequenceUp=n}},{key:"computeSequenceDown",value:function(){for(var t=this._endBody,n=[this._endBody.id];t.id!==this._transferBody.id;){if(!t.hasOwnProperty("orbiting"))throw new Error("The start body does not orbit around the transfer body");t=this.bodyFromId(t.orbiting),n.push(t.id)}this._sequenceDown=n.reverse()}},{key:"prepareTimes",value:function(){this._startDates=(0,a.SX)(this._startDateMin,this._startDateMax,this._nTimes),this._flightTimes=(0,a.SX)(this._flightTimeMin,this._flightTimeMax,this._nTimes)}}]),t}();self.onmessage=function(t){var n=t.data,e=function(t,n){var e=new d(t);e.computeAllDeltaVs();var r=e.data,s=r.deltaVs,o=r.startDates,a=r.flightTimes,h=Math.log(1.1),u=Math.min.apply(Math,(0,i.Z)(s.flat())),c=Array.from(Array(16).keys()).map((function(t){return u*Math.pow(1.1,t)})),f=c.map((function(t){return Math.log(t)/h})),y=s.map((function(t){return t.map((function(t){return Math.log(t)/h}))})),m=3600*n.hoursPerDay,l=o.map((function(t){return t/m})),_=a.map((function(t){return t/m})),v=c.map((function(t){return Math.floor(t).toString()})),b=e.bestTransfer;return{deltaVs:s,startDates:o,flightTimes:a,logDeltaVs:y,startDays:l,flightDays:_,levels:c,logLevels:f,tickLabels:v,bestTransfer:b,transferStartDay:b.startDate/m,transferFlightDay:b.flightTime/m}}(n.inputs,n.timeSettings);self.postMessage(e)}}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,e),s.exports}e.m=t,e.x=function(){var t=e.O(void 0,[774,315],(function(){return e(3936)}));return t=e.O(t)},function(){var t=[];e.O=function(n,i,r,s){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],r=t[c][1],s=t[c][2];for(var a=!0,h=0;h<i.length;h++)(!1&s||o>=s)&&Object.keys(e.O).every((function(t){return e.O[t](i[h])}))?i.splice(h--,1):(a=!1,s<o&&(o=s));if(a){t.splice(c--,1);var u=r();void 0!==u&&(n=u)}}return n}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,r,s]}}(),e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,i){return e.f[i](t,n),n}),[]))},e.u=function(t){return"static/js/"+t+"."+{315:"71ddfebc",774:"7fa2af5c"}[t]+".chunk.js"},e.miniCssF=function(t){},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/Kerbal-Transfer-Illustrator/",function(){var t={936:1};e.f.i=function(n,i){t[n]||importScripts(e.p+e.u(n))};var n=self.webpackChunkkerbal_transfer_illustrator=self.webpackChunkkerbal_transfer_illustrator||[],i=n.push.bind(n);n.push=function(n){var r=n[0],s=n[1],o=n[2];for(var a in s)e.o(s,a)&&(e.m[a]=s[a]);for(o&&o(e);r.length;)t[r.pop()]=1;i(n)}}(),function(){var t=e.x;e.x=function(){return Promise.all([e.e(774),e.e(315)]).then(t)}}();e.x()}();
//# sourceMappingURL=936.5d4b73df.chunk.js.map