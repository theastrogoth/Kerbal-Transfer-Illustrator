"use strict";(self.webpackChunkkerbal_transfer_illustrator=self.webpackChunkkerbal_transfer_illustrator||[]).push([[510],{724:function(t,n,r){r.d(n,{o7:function(){return e},Nb:function(){return i},gG:function(){return o},uo:function(){return a},pj:function(){return u},uZ:function(){return s},z7:function(){return f},ZF:function(){return c},JG:function(){return h},t7:function(){return v},R3:function(){return l},zy:function(){return b},$_:function(){return M},sZ:function(){return d},qK:function(){return g},_O:function(){return p},oF:function(){return y},A$:function(){return x},G7:function(){return m},G$:function(){return z},oU:function(){return Z},N2:function(){return T},Nx:function(){return N},HJ:function(){return A}});var e=l(1,0,0),i=l(0,1,0),o=l(0,0,1),a=2*Math.PI,u=.5*Math.PI;function s(t,n,r){return t>r?r:t<n?n:t}function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=n+a;if(n<=t&&t<r)return t;var e=Math.floor((t-n)/a);return t-a*e}function c(t){return Math.acos(s(t,-1,1))}function h(t,n){return function(t){return t<0}(n)?-t:t}function v(t,n,r){return t+r*(n-t)}function l(t,n,r){return{x:t,y:n,z:r}}function b(t,n){return{x:t.x*n,y:t.y*n,z:t.z*n}}function M(t,n){return{x:t.x/n,y:t.y/n,z:t.z/n}}function d(t,n){return{x:t.x+n.x,y:t.y+n.y,z:t.z+n.z}}function g(t,n){return{x:t.x-n.x,y:t.y-n.y,z:t.z-n.z}}function p(t,n){return t.x*n.x+t.y*n.y+t.z*n.z}function y(t,n){return{x:t.y*n.z-t.z*n.y,y:t.z*n.x-t.x*n.z,z:t.x*n.y-t.y*n.x}}function x(t){return p(t,t)}function m(t){return Math.sqrt(x(t))}function z(t){return M(t,m(t))}function Z(t,n,r){var e=Math.cos(r),i=Math.sin(r),o=b(t,e),a=b(y(n,t),i),u=b(n,p(n,t)*(1-e));return d(d(o,a),u)}function T(t,n){var r=z(t),e=z(n);return{axis:z(y(t,n)),angle:c(p(r,e))}}function N(t,n,r){var i=T(r,l(0,0,1)),o=i.axis,a=i.angle;isNaN(o.x)&&(o=e);var u=Z(t,o,a),s=Z(n,o,a),c=Math.atan2(u.y,u.x);return f(Math.atan2(s.y,s.x)-c)}function A(t,n,r,e){var i=Math.cos(n),o=Math.cos(r),a=Math.cos(e),u=Math.sin(n),s=Math.sin(r),f=Math.sin(e);return{x:(i*a-u*o*f)*t.x+(-i*f-u*o*a)*t.y+u*s*t.z,y:(u*a+i*o*f)*t.x+(i*o*a-u*f)*t.y+-i*s*t.z,z:s*f*t.x+s*a*t.y+o*t.z}}},4067:function(t,n,r){r.d(n,{v$:function(){return i},ri:function(){return o},Zg:function(){return a}});var e=(1+Math.sqrt(5))/2;function i(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-12,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,o=2*Number.EPSILON,a=n,u=r,s=t(a),f=t(u);if(Math.sign(s)===Math.sign(f))throw new Error("The provided bounds do not bracket a root.");if(Math.abs(s)<Math.abs(f)){var c=a;a=u,u=c;var h=s;s=f,f=h}for(var v=a,l=s,b=v,M=!0,d=0,g=1,p=i;p;){if(p--,Math.abs(u-a)<e)return u;if(Math.abs(f)<o)return u;d=0,d=Math.abs(s-l)>o&&Math.abs(f-l)>o?a*f*l/((s-f)*(s-l))+u*s*l/((f-s)*(f-l))+v*s*f/((l-s)*(l-f)):u-l*((u-a)/(f-s));var y=Math.abs(o*u),x=Math.abs(d-u),m=Math.abs(u-v),z=Math.abs(v-b);if((d-(3*a+u)/4)*(d-u)>=0||M&&x>=m/2||!M&&x>=z/2||M&&m<y||!M&&z<y?(d=(a+u)/2,M=!0):M=!1,g=t(d),Math.abs(g)<o)return d;if(b=v,v=u,Math.sign(s)!==Math.sign(g)?(u=d,f=g):(a=d,s=g),Math.abs(s)<Math.abs(f)){var Z=a;a=u,u=Z;var T=s;s=f,f=T}}return d}function o(t,n,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,a=2-e,u=i,s=n,f=r,c=f-s,h=s+a*c,v=h,l=v,b=t(l),M=t(v),d=t(h),g=0,p=0,y=(s+f)/2,x=0,m=0,z=0,Z=0,T=0,N=o;N;){if(N--,c<i)return y;z=.5*(x=(v-h)*(v-h)*(d-b)+(l-h)*(l-h)*(M-d))/(m=(v-h)*(d-b)+(l-h)*(M-d)),0===m||s>g||g>f||Math.abs(x/m)>.5*Math.abs(T)||Math.abs(T)<u?Z=a*(T=h<y?f-h:s-h):(T=Z,Z=z),(p=t(g=h+Z))<=d?(s=g<h?s:h,f=g<h?h:f,l=v,v=h,h=g,b=M,M=d,d=p):(s=g<h?g:s,f=g<h?f:g,p<=M||v===h?(l=v,v=g,b=M,M=p):(p<=b||l===h||l===v)&&(l=g,b=p)),c=f-s,y=(s+f)/2}return y}function a(t,n,r,e){for(var i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=0,u=r,s=e+1;s>e&&a<o;)i=u,u-=t(u)/n(u),s<(s=Math.abs(u-i))&&(u=(u+i)/2),a++;return a>=o&&console.log("Newton's method failed to find a root. Error of %f. ",s),u}},3510:function(t,n,r){var e=r(2982),i=r(6752),o=r(8818),a=r(724),u=r(4067);function s(t,n,r){var e=o.Z.orbitToPositionAtDate(n,t),i=o.Z.orbitToPositionAtDate(r.orbit,t);return(0,a.G7)((0,a.qK)(i,e))-r.soi}function f(t,n,r){for(var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=0===t.orbiting?n.sun:n.orbiterIds.get(t.orbiting),v=[],l=0;l<n.orbiters.length;l++)n.orbiters[l].orbiting===h.id&&v.push(n.orbiters[l]);var b=f,M=t.eccentricity>1,d=NaN,g=null===h.soi?1/0:h.soi;if(!M&&null!==h.soi){var p=t.apoapsis?t.apoapsis:t.semiMajorAxis*(1+t.eccentricity);M=p>h.soi}if(M){if(g===1/0){var y=Math.max.apply(Math,(0,e.Z)(v.map((function(t){return t.orbit.apoapsis?t.orbit.apoapsis+t.soi:t.orbit.semiMajorAxis*(1+t.orbit.eccentricity)+t.soi}))));d=o.Z.trueAnomalyToOrbitDate(o.Z.trueAnomalyAtDistance(y,t.eccentricity,t.semiLatusRectum),t,r),b=Math.min(b,d)}else d=i.Z.ejectionDate(t,h);b=Math.min(b,d)}else b=Math.min(b,r+t.siderealPeriod*(c+1));for(var x=M?1:c+1,m=r,z=M?d:m+t.siderealPeriod,Z=1/0,T=void 0,N=0;N<x;N++){for(var A=function(n){var r=function(r){return s(r,t,v[n])},e=(0,u.ri)(r,Math.min(m,Math.max(m,z)),z);r(e)<-10&&e<Z&&(Z=e,T=v[n])},D=0;D<v.length;D++)A(D);if(Z!==1/0||z>f)break;z=b+t.siderealPeriod,m=z}if(void 0===T){if(M&&d<=b){if(g===1/0)return null;var P=h.orbiting,k=0===P?n.sun:n.orbiterIds.get(P),S=o.Z.orbitToStateAtDate(t,h,d),q=o.Z.orbitToStateAtDate(h.orbit,k,d),I={date:d,pos:(0,a.sZ)(S.pos,q.pos),vel:(0,a.sZ)(S.vel,q.vel)};return o.Z.stateToOrbit(I,k)}return null}var O=function(n){return s(n,t,T)},_=function t(n,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{return(0,u.v$)(O,n,r)}catch(i){return e>10?t(n+10,r,e+1):NaN}},j=_(m,Z);if(isNaN(j)){if(!(O(m)<0))return null;j=m}var w=o.Z.orbitToStateAtDate(t,h,j),G=o.Z.orbitToStateAtDate(T.orbit,h,j),$={date:j,pos:(0,a.qK)(w.pos,G.pos),vel:(0,a.qK)(w.vel,G.vel)};return o.Z.stateToOrbit($,T)}function c(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=(0,e.Z)(i).sort((function(t,n){return t.date-n.date})),s=[],c=[t],h=[r],v=[],l=t,b=r,M=1/0,d=0;d<=u.length;d++){M=d!==u.length?u[d].date:1/0;for(var g=null,p=!1;!p;)if(!(p=null===(g=f(l,n,b,M,a)))){b=g.epoch,h.push(b);var y={orbits:c,intersectTimes:h,maneuvers:v};s.push(y),c=[g],l=g,h=[b],v=[]}if(d!==u.length){var x=0===l.orbiting?n.sun:n.orbiterIds.get(l.orbiting),m=o.Z.orbitToStateAtDate(l,x,u[d].date),z=o.Z.maneuverComponentsToManeuver(u[d],m);b=(g=o.Z.stateToOrbit(z.postState,x)).epoch,h.push(b),c.push(g),v.push(z),l=g}else{h.push(1/0);var Z={orbits:c,intersectTimes:h,maneuvers:v};s.push(Z)}}return s}function h(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.orbit.epoch,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return c(t.orbit,n,r,t.maneuvers,e)}var v=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:255,g:255,b:255},e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.orbit.epoch,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o={name:t.name,color:r,trajectories:h(t,n,e,i)};return o};self.onmessage=function(t){var n=t.data,r=n.vesselPlans,e=n.system,i=r.map((function(t){return v(t,e)}));self.postMessage(i)}}}]);
//# sourceMappingURL=510.1c9ad405.chunk.js.map