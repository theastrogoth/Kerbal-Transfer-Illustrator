{"version":3,"file":"static/js/549.dc059f70.chunk.js","mappings":"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","sources":["main/libs/math.ts","../javascript/esm|/home/tom/Projects/TypeScript/Kerbal-Transfer-Illustrator/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../javascript/esm|/home/tom/Projects/TypeScript/Kerbal-Transfer-Illustrator/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../javascript/esm|/home/tom/Projects/TypeScript/Kerbal-Transfer-Illustrator/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../javascript/esm|/home/tom/Projects/TypeScript/Kerbal-Transfer-Illustrator/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","main/libs/evolution.ts","workers/multi-flyby-search.worker.ts","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["/* Miscellaneous useful functions */\nexport const X_DIR = vec3(1, 0, 0);\nexport const Y_DIR = vec3(0, 1, 0);\nexport const Z_DIR = vec3(0, 0, 1);\n\nexport const TWO_PI = 2 * Math.PI;\nexport const HALF_PI = 0.5 * Math.PI;\n\nexport function linspace(start: number, stop: number, n: number): number[] {\n    n = Math.floor(n);\n\n    if(n === 1) {\n        return [stop]\n    }\n\n    const interval = (stop - start) / (n - 1);\n    const vals: number[] = new Array<number>(n);\n    vals[0] = start;\n    for(let i = 1; i < n; i++) {\n        vals[i] = vals[i-1] + interval;\n    }\n    return vals;\n}\n\nexport function clamp(x: number, min: number, max: number) {\n    return x > max ? max : x < min ? min : x;\n}\n\nexport function degToRad(deg: number) {\n    return deg * Math.PI / 180.0;\n}\n\nexport function radToDeg(rad: number) {\n    return rad * 180.0 / Math.PI;\n}\n\nexport function wrapAngle(angle: number, min: number = 0) {\n    const max = min + TWO_PI;\n    if(min <= angle && angle < max) {\n        return angle;\n    }\n    const circles = Math.floor((angle - min) / TWO_PI);\n    return angle - TWO_PI * circles;\n}\n\nexport function acosClamped(x: number) {\n    return Math.acos(clamp(x, -1, 1));\n}\n\nexport function isnegative(x: number) {\n    return x < 0\n}\n\nexport function copysign(x: number, y: number) {\n    return isnegative(y) ? -x : x;\n}\n\nexport function randomSign(): -1 | 1 {\n    // @ts-ignore\n    return (Math.round(Math.random()) * 2 - 1);\n}\n\nexport function randint(a: number, b: number){\n    return Math.floor(a + Math.random() * (b - a + 1));\n}\n\nexport function lerp(x: number, y: number, t: number) {\n    return x + t * (y - x);\n}\n\n\n/* Functions for manipulating 3D vectors */\n\nexport function vec3(x: number, y: number, z: number) : Vector3 {\n    return {x: x, y: y, z: z};\n}\n\nexport function clone3(v: Vector3): Vector3 {\n    return {x: v.x, y: v.y, z: v.z};\n}\n\nexport function mult3(v: Vector3, f: number) : Vector3 {\n    return {\n        x: v.x * f,\n        y: v.y * f,\n        z: v.z * f\n    };\n}\n\nexport function div3(v: Vector3, f: number) : Vector3 {\n    return {\n        x: v.x / f,\n        y: v.y / f,\n        z: v.z / f\n    };\n}\n\nexport function add3(u: Vector3, v: Vector3) : Vector3 {\n    return {\n        x: u.x + v.x,\n        y: u.y + v.y,\n        z: u.z + v.z\n    };\n}\n\nexport function sub3(u: Vector3, v: Vector3) : Vector3 {\n    return {\n        x: u.x - v.x,\n        y: u.y - v.y,\n        z: u.z - v.z\n    };\n}\n\nexport function dot3(u: Vector3, v: Vector3) {\n    return u.x*v.x + u.y*v.y + u.z*v.z;\n}\n\nexport function cross3(u: Vector3, v:Vector3) : Vector3 {\n    return {\n        x: u.y * v.z - u.z * v.y,\n        y: u.z * v.x - u.x * v.z,\n        z: u.x * v.y - u.y * v.x,\n    };\n}\n\nexport function magSq3(v: Vector3) {\n    return dot3(v, v);\n}\n\nexport function mag3(v: Vector3) {\n    return Math.sqrt(magSq3(v))\n}\n\nexport function normalize3(v: Vector3) : Vector3 {\n    const len = mag3(v);\n    return div3(v, len);\n}\n\n/* https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula */\nexport function roderigues(v: Vector3, axis: Vector3, angle: number) : Vector3 {\n    const c = Math.cos(angle);\n    const s = Math.sin(angle);\n\n    const v1 = mult3(v, c);\n    const v2 = mult3(cross3(axis, v), s);\n    const v3 = mult3(axis, dot3(axis, v) * (1 - c));\n\n    return add3(add3(v1, v2), v3)\n}\n\nexport function alignVectorsAngleAxis(x: Vector3, y: Vector3) {\n    const xHat = normalize3(x);\n    const yHat = normalize3(y);\n    const axis  = normalize3(cross3(x,y));\n    const angle = acosClamped(dot3(xHat, yHat));\n    return {axis, angle}\n}\n\nexport function counterClockwiseAngleInPlane(x: Vector3, y: Vector3, normalDirection: Vector3) {\n    let {axis, angle} = alignVectorsAngleAxis(normalDirection, vec3(0, 0, 1));\n    if(isNaN(axis.x)) {\n        axis = X_DIR;\n    }\n    const xPlane = roderigues(x, axis, angle);\n    const yPlane = roderigues(y, axis, angle);\n    const xAngle = Math.atan2(xPlane.y, xPlane.x);\n    const yAngle = Math.atan2(yPlane.y, yPlane.x);\n    // if(Math.abs(xPlane.z) > 1e-8 || Math.abs(yPlane.z) > 1e-8) {\n    //     console.log(x, y, normalDirection)\n    // }\n    return wrapAngle(yAngle - xAngle);\n}\n\n/* https://en.wikipedia.org/wiki/Euler_angles#Rotation_matrix */\nexport function zxz(v: Vector3, a1: number, a2: number, a3: number) : Vector3 {\n    const c1 = Math.cos(a1);\n    const c2 = Math.cos(a2);\n    const c3 = Math.cos(a3);\n\n    const s1 = Math.sin(a1);\n    const s2 = Math.sin(a2);\n    const s3 = Math.sin(a3);\n\n    const x = (c1*c3 - s1*c2*s3)*v.x + (-c1*s3 - s1*c2*c3)*v.y + (s1*s2)*v.z;\n    const y = (s1*c3 + c1*c2*s3)*v.x + (c1*c2*c3 - s1*s3)*v.y + (-c1*s2)*v.z;\n    const z = (s2*s3)*v.x + (s2*c3)*v.y + c2*v.z;\n\n    return {\n        x: x,\n        y: y,\n        z: z,\n    };\n}\n\n/* Coordinate Systems */\n\nexport function cartesianToSpherical(p: Vector3): Spherical {\n    const r = mag3(p);\n    const theta = Math.atan2(Math.sqrt(p.x * p.x + p.y * p.y), p.z);\n    const phi = Math.atan2(p.y, p.x);\n    return {r, theta, phi};\n}\n\nexport function sphericalToCartesian(p: Spherical) {\n    const x = p.r * Math.cos(p.phi) * Math.sin(p.theta);\n    const y = p.r * Math.sin(p.phi) * Math.sin(p.theta);\n    const z = p.r * Math.cos(p.theta);\n    return {x, y, z};\n}\n\n/* Dates & Times */\n\nexport function timeToCalendarDate(time: number, timeSettings: TimeSettings, yearOffset: number = 1, dayOffset: number = 1): CalendarDate {  \n    const m = 60;\n    const h = 3600;\n    const d = timeSettings.hoursPerDay * h;\n    const y = timeSettings.daysPerYear * d;\n\n    let secondsRemaining = time;\n    const year = Math.floor(secondsRemaining / y) + yearOffset;\n    secondsRemaining = secondsRemaining - y * (year - yearOffset);\n    const day = Math.floor(secondsRemaining / d ) + dayOffset;    \n    secondsRemaining = secondsRemaining - d * (day - dayOffset);\n    const hour = Math.floor(secondsRemaining / h);\n    secondsRemaining = secondsRemaining - h * hour;\n    const minute = Math.floor(secondsRemaining / m);\n    secondsRemaining = secondsRemaining - m * minute;\n    const second = secondsRemaining;\n    return {\n        year,\n        day, \n        hour,\n        minute,\n        second\n    }\n}\n\nexport function calendarDateToTime(calendarDate: CalendarDate, timeSettings: TimeSettings, yearOffset: number = 0, dayOffset: number = 0): number {\n    const years   = calendarDate.year - yearOffset;\n    const days    = calendarDate.day  - dayOffset;\n    const hours   = calendarDate.hour;\n    const minutes = calendarDate.minute;\n    const seconds = calendarDate.second;\n\n    return ( ((timeSettings.daysPerYear * years + days) * timeSettings.hoursPerDay + hours ) * 60 + minutes) * 60 + seconds;\n}\n\nexport function calendarDateToString(cd: CalendarDate): String {\n    return \"Year \".concat(String(cd.year), \", Day \", String(cd.day), \", \", ('0'+String(cd.hour)).slice(-2), \":\", ('0'+String(cd.minute)).slice(-2), \":\", ('0'+String(Math.round(cd.second))).slice(-2));\n}\n\nexport function calendarDateToDurationString(cd: CalendarDate): String {\n    return String(cd.year).concat(cd.year === 1 ? \" Year, \" : \" Years, \", \n           String(cd.day), cd.day === 1 ? \" Day, \" : \" Days, \", \n           String(cd.hour), cd.hour === 1 ? \" hour, \" : \" hours, \", \n           String(cd.minute), cd.minute === 1 ? \" minute, and \" : \" minutes, and \", \n           String(Math.round(cd.second)), cd.second === 1 ? \" second\" : \" seconds\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { clamp, randint } from \"./math\";\n\n\n namespace DifferentialEvolution {\n    function createRandomAgent(dim: number){\n        const agent: Agent = Array<number>(dim);\n        randomizeAgent(agent);\n        return agent;\n    }\n\n     function randomizeAgent(agent: Agent){\n        for(let i = 0; i < agent.length; i++){\n            agent[i] = Math.random();\n        }\n    }\n\n    export function createRandomPopulation(size: number, dim: number){\n        const pop: Agent[] = [];\n        for(let i = 0; i < size; i++){\n            pop.push(createRandomAgent(dim));\n        }\n        return pop;\n    }\n\n    export function evaluatePopulationFitness(pop: Agent[], fitnessFun: (agent: Agent) => number){\n        const fit: number[] = Array(pop.length);\n        for(let i = 0; i < pop.length; i++) {\n            fit[i] = fitnessFun(pop[i]);\n        }\n        return fit;\n    }\n\n    export function evolvePopulation(population: Agent[], fitnesses: number[], fitnessFun: (agent: Agent) => number, cr: number = 0.9, f: number = 0.8){\n        const dim = population[0].length;\n\n        const nextPop: Agent[]  = Array(population.length);\n        const nextFit: number[] = Array(fitnesses.length);\n\n        for(let j = 0; j < population.length; j++) {\n            const x = population[j];\n            const fx = fitnesses[j];\n            \n            const [a, b, c] = pick3(population, j);\n            const ri = randint(0, dim - 1);\n            const y: Agent = Array(dim).fill(0);\n            for(let i = 0; i < dim; i++){\n                if(Math.random() < cr || i === ri) {\n                    y[i] = a[i] + f * (b[i] - c[i]);\n                } else {\n                    y[i] = x[i];\n                }\n                y[i] = clamp(y[i], 0, 1);\n            }\n\n            const fy = fitnessFun(y);\n            if(fy < fx) {\n                nextPop[j] = y;\n                nextFit[j] = fy;\n            } else {\n                nextPop[j] = x;\n                nextFit[j] = fx;\n            }\n        }\n\n        return {\n            pop: nextPop,\n            fit: nextFit\n        }\n    }\n\n    function pick3(population: Agent[], parentIndex: number) {\n        const swap = (arr: any[], i: number, j: number) => {\n            const t = arr[j];\n            arr[j] = arr[i];\n            arr[i] = t;\n        }\n        \n        swap(population, parentIndex, 0);\n\n        const picked: (Agent | null)[] = [null, null, null];\n        const pickedIndices = [0, 0, 0];\n        for(let i = 0; i <= 2; i++) {\n            const ri = randint(1 + i, population.length - 1);\n            picked[i] = population[ri];\n            pickedIndices[i] = ri;\n            swap(population, ri, i);\n        }\n\n        for(let i = 2; i >= 0; i--){\n            swap(population, pickedIndices[i], i);\n        }\n        swap(population, parentIndex, 0);\n\n        return picked as Agent[];\n    }\n}\n\nexport default DifferentialEvolution;","import DifferentialEvolution from \"../main/libs/evolution\";\nimport MultiFlybyCalculator from \"../main/libs/multi-flyby-calculator\";\nimport FlybyCalcs from \"../main/libs/flybycalcs\";\n\ndeclare var self: DedicatedWorkerGlobalScope;\nexport {};\n\nself.onmessage = (event: MessageEvent<{inputs: MultiFlybySearchInputs, population: Agent[], fitnesses: number[], generation: number, x: number[], bestY: number[], meanY: number[]}>) => {\n    const {inputs, population, fitnesses, generation, x, bestY, meanY} = event.data;\n\n    function fitness(agent: Agent, inputs: MultiFlybySearchInputs) {\n        const mfinputs = FlybyCalcs.multiFlybyInputsFromAgent(agent, inputs);\n        const calculator = new MultiFlybyCalculator(mfinputs);\n        return calculator.computeFitness();\n    };\n    \n    const fitnessFun = (agent: Agent) => fitness(agent, inputs);\n\n    let newPopulation: Agent[];\n    let newFitnesses: number[];\n    // initialize a random population on for the first generation\n    if(generation === 0) {\n        // console.log(\"\\tinitialize population\")\n        const numLegs = inputs.flybyIdSequence.length + 1;\n        const agentDim = 1 + numLegs;\n        const popSize = 200 * agentDim;\n        newPopulation = DifferentialEvolution.createRandomPopulation(popSize, agentDim);\n        newFitnesses = DifferentialEvolution.evaluatePopulationFitness(newPopulation, fitnessFun);\n    // otherwise, evolve the previous population\n    } else {\n        const res = DifferentialEvolution.evolvePopulation(population, fitnesses, fitnessFun);\n        newPopulation = res.pop;\n        newFitnesses  = res.fit;\n    }\n    const newX     = [...x,     generation+1];\n    const newBestY = [...bestY, Math.min(...newFitnesses)];\n    const newMeanY = [...meanY, newFitnesses.reduce((p,c) => p + c) / newFitnesses.length];\n\n    self.postMessage({inputs, population: newPopulation, fitnesses: newFitnesses, generation: generation+1, x: newX, bestY: newBestY, meanY: newMeanY}); \n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [424,325,454], function() { return __webpack_require__(1549); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"325\":\"928c752c\",\"424\":\"e39a63f6\",\"454\":\"42b20fd9\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/Kerbal-Transfer-Illustrator/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t549: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkkerbal_transfer_illustrator\"] = self[\"webpackChunkkerbal_transfer_illustrator\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([424,325,454].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["X_DIR","vec3","Y_DIR","Z_DIR","TWO_PI","Math","PI","HALF_PI","clamp","x","min","max","degToRad","deg","wrapAngle","angle","circles","floor","acosClamped","acos","copysign","y","isnegative","randomSign","round","random","randint","a","b","lerp","t","z","mult3","v","f","div3","add3","u","sub3","dot3","cross3","magSq3","mag3","sqrt","normalize3","roderigues","axis","c","cos","s","sin","v1","v2","v3","alignVectorsAngleAxis","xHat","yHat","counterClockwiseAngleInPlane","normalDirection","isNaN","xPlane","yPlane","xAngle","atan2","zxz","a1","a2","a3","c1","c2","c3","s1","s2","s3","cartesianToSpherical","p","r","theta","phi","sphericalToCartesian","_slicedToArray","arr","i","Array","isArray","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","createRandomAgent","dim","agent","randomizeAgent","pick3","population","parentIndex","swap","j","picked","pickedIndices","ri","size","pop","fitnessFun","fit","fitnesses","cr","nextPop","nextFit","fx","fill","fy","DifferentialEvolution","self","onmessage","event","data","inputs","generation","bestY","meanY","newPopulation","newFitnesses","mfinputs","FlybyCalcs","MultiFlybyCalculator","computeFitness","fitness","agentDim","flybyIdSequence","popSize","res","newX","newBestY","newMeanY","reduce","postMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","key","splice","d","definition","o","defineProperty","enumerable","get","e","chunkId","Promise","all","promises","miniCssF","obj","prop","prototype","hasOwnProperty","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","map","then"],"sourceRoot":""}