"use strict";(self.webpackChunkkerbal_transfer_illustrator=self.webpackChunkkerbal_transfer_illustrator||[]).push([[774],{6752:function(t,e,r){var i,n=r(1684),o=r(8818),a=r(724),s=r(4067);!function(t){function e(t,e,i,n,u){var c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=u?1:-1,h=e.stdGravParam,v=e.soi,f=(0,a.A$)(i),d=1/(2/v-f/h),m=1e-8,p=o.Z.rotateToPerifocalFromInertial(i,t),b=t.semiMajorAxis;if(t.eccentricity>m){var y=function(e){return r(e,t,h,v,p,f,d,l).err},g=t.semiMajorAxis*(1-t.eccentricity),M=t.eccentricity>1?v:t.semiMajorAxis*(1+t.eccentricity);b=(0,s.v$)(y,g,M)}var Z=r(b,t,h,v,p,f,d,l),A=Z.parkNu,P=Z.e,T=Z.soiNu,O=Z.pPos,D=Z.pVel,S=o.Z.trueAnomalyToDate(T,P,o.Z.siderealPeriod(d,h),0,0),j=c?o.Z.trueAnomalyToOrbitDate(A,t,n-S-t.siderealPeriod/2):n-S,x={date:j,pos:O,vel:D},F={date:j,pos:O,vel:o.Z.velocityAtTrueAnomaly(t,h,A)},G=o.Z.stateToOrbit(x,e);if(1===l){var I=o.Z.maneuverFromOrbitalStates(F,x);return{orbits:[G],intersectTimes:[G.epoch,G.epoch+S],maneuvers:[I]}}var N=o.Z.maneuverFromOrbitalStates(x,F);return{orbits:[G],intersectTimes:[G.epoch+S,G.epoch],maneuvers:[N]}}function r(t,e,r,i,n,s,u,c){var l=s+2*r*(1/t-1/i),h=Math.sqrt(l),v=Math.sqrt(1+2*(.5*l-r/t)*t*t*l/r/r),f=u*(1-v*v),d=c*o.Z.trueAnomalyAtDistance(i,v,f),m=(0,a.zy)(o.Z.motionDirectionAtTrueAnomaly(d,v),Math.sqrt(s)),p=(0,a.zy)(a.o7,t),b=(0,a.zy)(a.Nb,h),y=Math.atan2(n.z,Math.sqrt(Math.abs(m.y*m.y-n.z*n.z)));m=(0,a.oU)(m,a.o7,y),p=(0,a.oU)(p,a.o7,y),b=(0,a.oU)(b,a.o7,y);var g=Math.atan2(n.y,n.x)-Math.atan2(m.y,m.x);m=(0,a.oU)(m,a.gG,g),p=(0,a.oU)(p,a.gG,g),b=(0,a.oU)(b,a.gG,g),m=o.Z.rotateToInertialFromPerifocal(m,e),p=o.Z.rotateToInertialFromPerifocal(p,e),b=o.Z.rotateToInertialFromPerifocal(b,e);var M=o.Z.angleInOrbitPlane(p,e);return{err:t-o.Z.distanceAtOrbitTrueAnomaly(M,e),parkNu:M,e:v,soiNu:d,pPos:p,pVel:b}}function i(t,e,r,i,n){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"direct",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,a.R3)(0,0,0),v=n?1:-1,f=-a.uo,m=a.uo-Number.EPSILON;t.eccentricity>1&&(f=-(m=d(t,e)-2*Number.EPSILON));var p="direct"===c?u:"oberth"===c?h:u;function b(n){if(isNaN(n)||n===1/0)throw console.log(n),Error("nu cannot be NaN");var a=p(n,t,e,r,i,v,o,l,!1),s=a.deltaV,u=a.err;return s*Math.exp(Math.min(100*u,10))}var y=(0,s.ri)(b,f,m,1e-4),g=p(y,t,e,r,i,v,o,l,!0);return g.trajectoryInfo}function u(t,e,r,i,n,s){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,a.R3)(0,0,0),h=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],v=(0,a.sZ)(o.Z.positionAtTrueAnomaly(e,t),l);if(isNaN(v.x))throw Error("nu cannot be NaN");var f=c(v,r,i,n,s,h),d=f.err,m=f.orbit,p=u?o.Z.trueAnomalyToOrbitDate(t,e,m.epoch-e.siderealPeriod/2):m.epoch,b=n+p-m.epoch;m.epoch=p;var y,g={date:m.epoch,pos:o.Z.positionAtTrueAnomaly(e,t),vel:o.Z.velocityAtTrueAnomaly(e,r.stdGravParam,t)},M=o.Z.orbitToStateAtDate(m,r,m.epoch);if(1===s){var Z=o.Z.maneuverFromOrbitalStates(g,M);y={orbits:[m],intersectTimes:[m.epoch,b],maneuvers:[Z]}}else{var A=o.Z.maneuverFromOrbitalStates(M,g);y={orbits:[m],intersectTimes:[b,m.epoch],maneuvers:[A]}}var P=y.maneuvers[0].deltaVMag;return{deltaV:P,err:d,trajectoryInfo:y}}function c(t,e,r,i,n){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=e.stdGravParam,h=(0,a.G7)(t),v=e.soi,f=(0,a.G$)((0,a.oF)(t,r)),d=(0,a.oF)(a.gG,f),m=(0,a.G7)(d),p=0===m?a.o7:(0,a.$_)(d,m),b=1/(2/v-(0,a.A$)(r)/c),y=(0,a.ZF)(f.z),g=(0,a.z7)((0,a.JG)(1,p.y)*(0,a.ZF)(p.x)),M=1-2*Number.EPSILON,Z=(0,a.uZ)(v/b-1+Number.EPSILON,0,M);function A(i){return isNaN(i)?2:l(i,b,g,y,t,h,v,c,r,e.id,n).err}b<0&&(Z=1+2*Number.EPSILON,M=1===(M=Math.max(1-h/b,h/b-1))?1+4*Number.EPSILON:M);var P=(0,s.ri)(A,Z,M,1e-6),T=l(P,b,g,y,t,h,v,c,r,e.id,n),O=T.err,D=T.orbit;if(u){var S=D.semiLatusRectum,j=n*o.Z.trueAnomalyAtDistance(h,P,S),x=n*o.Z.trueAnomalyAtDistance(v,P,S),F=o.Z.siderealPeriod(b,c),G=o.Z.trueToMeanAnomaly(j,P),I=o.Z.trueAnomalyToDate(x,P,F,G,0),N=i-I;D.meanAnomalyEpoch=G,D.epoch=N}return{err:O,orbit:D}}function l(t,e,r,i,n,s,u,c,l,h,v){var f=e*(1-t*t),d=v*o.Z.trueAnomalyAtDistance(s,t,f),m=v*o.Z.trueAnomalyAtDistance(u,t,f),p={orbiting:h,semiMajorAxis:e,eccentricity:t,inclination:i,ascNodeLongitude:r,argOfPeriapsis:(0,a.z7)(o.Z.angleInPlane(n,r,i,0)-d),meanAnomalyEpoch:0,epoch:0,semiLatusRectum:f,siderealPeriod:o.Z.siderealPeriod(e,c)},b=o.Z.velocityAtTrueAnomaly(p,c,m),y=1-(0,a._O)((0,a.G$)(l),(0,a.G$)(b));return isNaN(y)&&(y=2),console.log(),{err:y,orbit:p}}function h(t,e,r,i,n,s){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,a.R3)(0,0,0),l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],h=(0,a.sZ)(o.Z.positionAtTrueAnomaly(e,t),c),f=o.Z.velocityAtTrueAnomaly(e,r.stdGravParam,t),d=v(h,f,r,i,n,s),m=d.deltaV,p=d.obrPreState,b=d.obrPostState,y=d.hypPreState,g=d.hypPostState,M={orbits:[],intersectTimes:[],maneuvers:[]};if(l){var Z=u?o.Z.trueAnomalyToOrbitDate(t,e,p.date-e.siderealPeriod/2):p.date,A=n+Z-p.date;y.date=y.date+Z-p.date,g.date=y.date,p.date=Z,b.date=Z;var P=o.Z.stateToOrbit(b,r),T=o.Z.stateToOrbit(g,r);if(1===s){var O=o.Z.maneuverFromOrbitalStates(p,b),D=o.Z.maneuverFromOrbitalStates(g,g);M={orbits:[P,T],intersectTimes:[P.epoch,T.epoch,A],maneuvers:[O,D]}}else{var S=o.Z.maneuverFromOrbitalStates(b,p),j=o.Z.maneuverFromOrbitalStates(g,g);M={orbits:[T,P],intersectTimes:[A,T.epoch,P.epoch],maneuvers:[j,S]}}}return{deltaV:m,err:0,trajectoryInfo:M}}function v(t,e,r,i,u,c){var l=r.stdGravParam,h=r.soi,v=(0,a.G7)(t),f=(0,a.$_)(t,v),d=(0,a.A$)(i),m=(0,a.$_)(i,Math.sqrt(d)),p=d/2-l/h,b=-l/(2*p),y=(0,a.G$)((0,a.oF)(f,m)),g=(0,a.Nx)(f,m,y),M=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=1-t/b,n=b*(1-i*i),s=c*o.Z.trueAnomalyAtDistance(h,i,n),u=o.Z.motionAngleAtTrueAnomaly(s,i),f=(0,a.z7)(u-g,-Math.PI*(c+1)),d=(t/v-1)/Math.cos(f),y=t/(1-d),M=-l/(2*y),Z=Math.sqrt(2*(M+l/t)),A=Math.sqrt(2*(p+l/t)),P=(0,a.R3)(Math.cos(u),Math.sin(u),0),T=(0,a.N2)(P,m),O=T.rotationAxis,D=T.rotationAngle,S=Math.sqrt(2*(M+l/v)),j=o.Z.motionDirectionAtTrueAnomaly(f,d),x=(0,a.oU)(j,O,D),F=(0,a.zy)(x,S),G=Math.abs(Z-A)+(0,a.G7)((0,a.qK)(F,e)),I=(0,a.R3)(0,0,0),N=(0,a.R3)(0,0,0),w=(0,a.R3)(0,0,0),q=0,R=0;if(r){I=(0,a.zy)((0,a.oU)((0,a.R3)(1,0,0),O,D),t);var E=(0,a.oU)((0,a.R3)(0,1,0),O,D);N=(0,a.zy)(E,A),w=(0,a.zy)(E,Z),q=Math.abs(o.Z.trueAnomalyToDate(s,i,o.Z.siderealPeriod(b,l),0,0)),R=Math.abs(o.Z.trueAnomalyToDate(f,d,o.Z.siderealPeriod(y,l),0,0))}return{deltaV:G,obrVel:F,periapsisPos:I,hypPeriapsisVel:N,obrPeriapsisVel:w,hypDuration:q,obrDuration:R}},Z=(0,s.ri)((function(t){return M(t).deltaV}),n.Z.minFlybyRadius(r),n.Z.maxFlybyRadius(r),1e-8),A=M(Z),P=A.deltaV,T=A.obrVel,O=A.periapsisPos,D=A.hypPeriapsisVel,S=A.obrPeriapsisVel,j=A.hypDuration,x=A.obrDuration,F=u-c*j,G=F-c*x;return{deltaV:P,obrPreState:{date:G,pos:t,vel:e},obrPostState:{date:G,pos:t,vel:T},hypPreState:{date:F,pos:O,vel:S},hypPostState:{date:F,pos:O,vel:D}}}function f(t,e,r){return r*o.Z.trueAnomalyAtDistance(e.soi,t.eccentricity,t.semiLatusRectum)}function d(t,e){return f(t,e,1)}function m(t,e,r){var i=void 0;return t.eccentricity<1&&(i=1===r?t.epoch:t.epoch-t.siderealPeriod),o.Z.trueAnomalyToDate(f(t,e,r),t.eccentricity,t.siderealPeriod,t.meanAnomalyEpoch,t.epoch,i)}function p(t,e,r){return o.Z.positionAtTrueAnomaly(t,f(t,e,r))}t.simpleDeparture=function(t,r,i,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e(t,r,i,n,!0,o)},t.simpleArrival=function(t,r,i,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return e(t,r,i,n,!1,o)},t.simpleDepartureArrival=e,t.optimalDeparture=function(t,e,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"direct",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,a.R3)(0,0,0);return i(t,e,r,n,!0,o,s,u)},t.optimalArrival=function(t,e,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"direct",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:(0,a.R3)(0,0,0);return i(t,e,r,n,!1,o,s,u)},t.optimalDepartureArrival=i,t.departArriveForPosition=c,t.oberthDepartArriveForTrueAnomaly=h,t.oberthDepartArriveForPosition=v,t.ejectionTrueAnomaly=d,t.insertionTrueAnomaly=function(t,e){return f(t,e,-1)},t.ejectionDate=function(t,e){return m(t,e,1)},t.insertionDate=function(t,e){return m(t,e,-1)},t.ejectionPosition=function(t,e){return p(t,e,1)},t.insertionPosition=function(t,e){return p(t,e,-1)},t.ejectionVelocity=function(t,e){return function(t,e,r){return o.Z.velocityAtTrueAnomaly(t,e.stdGravParam,f(t,e,r))}(t,e,1)},t.insertionVelocity=function(t,e){return p(t,e,-1)}}(i||(i={})),e.Z=i},1684:function(t,e,r){var i,n=r(8818),o=r(6752),a=r(724),s=r(4067);!function(t){function e(t){return t.radius+t.atmosphereHeight}function r(t){return t.soi}t.minFlybyRadius=e,t.maxFlybyRadius=r,t.legDurationBounds=function(t,e,r){var i=.5*(t.semiMajorAxis+e.semiMajorAxis),o=n.Z.siderealPeriod(i,r.stdGravParam);return{lb:o/25,ub:2*o}},t.flybyParameters=function(t){var i=t.velIn,o=t.velOut,u=t.body,c=t.time,l=u.stdGravParam,h=u.soi,v=(0,a.A$)(i),f=(0,a.A$)(o),d=(0,a.$_)(i,Math.sqrt(v)),m=(0,a.$_)(o,Math.sqrt(f)),p=v/2-l/h,b=f/2-l/h,y=-l/(2*p),g=-l/(2*b),M=(0,a.G$)((0,a.oF)(d,m)),Z=(0,a.ZF)((0,a._O)(d,m)),A=function(t){var e=1-t/y,r=1-t/g,i=y*(1-e*e),o=g*(1-r*r),s=-n.Z.trueAnomalyAtDistance(h,e,i),u=n.Z.trueAnomalyAtDistance(h,r,o),c=n.Z.motionAngleAtTrueAnomaly(s,e),l=n.Z.motionAngleAtTrueAnomaly(u,r),v=Math.abs(Z-(0,a.z7)(l-c));return isNaN(v)?Math.PI:v},P=(0,s.ri)(A,e(u),r(u),1e-8),T=A(P),O=1-P/y,D=1-P/g,S=Math.sqrt(2*(p+l/P)),j=Math.sqrt(2*(b+l/P)),x=Math.abs(j-S);return{inSemiMajorAxis:y,inEccentricity:O,inDirection:d,outSemiMajorAxis:g,outEccentricity:D,outDirection:m,normalDirection:M,deltaV:x,error:T,time:c}},t.flybyFromParameters=function(t,e){var r=e.soi,i=e.stdGravParam,s=t.inSemiMajorAxis,u=t.outSemiMajorAxis,c=t.inEccentricity,l=s*(1-c),h=s*(1-c*c),v=-n.Z.trueAnomalyAtDistance(r,c,h),f=n.Z.motionDirectionAtTrueAnomaly(v,c),d=(0,a.N2)(f,t.inDirection),m=d.rotationAngle,p=d.rotationAxis,b=(0,a.oU)((0,a.R3)(l,0,0),p,m),y=Math.sqrt(i*(2/l-1/s)),g=Math.sqrt(i*(2/l-1/u)),M=(0,a.oU)((0,a.R3)(0,y,0),p,m),Z=(0,a.oU)((0,a.R3)(0,g,0),p,m),A={date:t.time,pos:b,vel:M},P={date:t.time,pos:b,vel:Z},T=n.Z.stateToOrbit(A,e),O=n.Z.stateToOrbit(P,e),D=n.Z.maneuverFromOrbitalStates(A,P),S=o.Z.insertionDate(T,e),j=o.Z.ejectionDate(O,e);return{orbits:[T,O],intersectTimes:[S,t.time,j],maneuvers:[D]}},t.multiFlybyInputsFromAgent=function(t,e){for(var r=(0,a.t7)(e.startDateMin,e.startDateMax,t[0]),i=[],n=0;n<t.length-1;n++){var o=(0,a.t7)(e.flightTimesMax[n],e.flightTimesMin[n],t[n+1]);i.push(o)}return{system:e.system,startOrbit:e.startOrbit,endOrbit:e.endOrbit,flybyIdSequence:e.flybyIdSequence,startDate:r,flightTimes:i,planeChange:e.planeChange,matchStartMo:e.matchStartMo,matchEndMo:e.matchEndMo,noInsertionBurn:e.noInsertionBurn}}}(i||(i={})),e.Z=i},8818:function(t,e,r){var i,n=r(724),o=r(4067);!function(t){function e(t,e){return n.uo*Math.sqrt(Math.abs(t*t*t)/e)}function r(t,e){return Math.atan(e*Math.sin(t)/(1+e*Math.cos(t)))}function i(t,e){return t+n.pj-r(t,e)}function a(t,e){var r=i(t,e);return(0,n.R3)(Math.cos(r),Math.sin(r),0)}function s(t,e,r){return r/(1+e*Math.cos(t))}function u(t,e,r,i){return r+n.uo*(t-i)/e}function c(t,e,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=i+(t-r)*e/n.uo;if(o){var s=Math.ceil((o-a)/e);a+=e*s}return a}function l(t,e){if(e<1){var r=2*Math.atan2(Math.sin(t/2)*Math.sqrt(1-e),Math.cos(t/2)*Math.sqrt(1+e));return r-e*Math.sin(r)}var i=2*Math.atanh(Math.tan(t/2)*Math.sqrt((e-1)/(e+1)));return e*Math.sinh(i)-i}function h(t,e){if(e<1){var r=(0,o.Zg)((function(r){return r-e*Math.sin(r)-t}),(function(t){return 1-e*Math.cos(t)}),t,1e-12);return 2*Math.atan(Math.sqrt((1+e)/(1-e))*Math.tan(.5*r))}var i=Math.abs(t)>4*Math.PI?4*Math.sign(t)*Math.PI:t,n=(0,o.Zg)((function(r){return e*Math.sinh(r)-r-t}),(function(t){return e*Math.cosh(t)-1}),i,1e-12);return 2*Math.atan(Math.sqrt((e+1)/(e-1))*Math.tanh(.5*n))}function v(t,e,r,i,n){return h(u(t,r,i,n),e)}function f(t,e,r,i,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=l(t,e);return c(a,r,i,n,o)}function d(t,e,r,i){var o=(0,n.HJ)(t,-i,-r,-e);return Math.atan2(o.y,o.x)}function m(t,e){var r=t.eccentricity,i=t.inclination,o=t.ascNodeLongitude,a=t.argOfPeriapsis,u=s(e,r,t.semiLatusRectum),c=(0,n.R3)(u*Math.cos(e),u*Math.sin(e),0);return(0,n.HJ)(c,o,i,a)}function p(t,e,r){var i=t.semiMajorAxis,o=t.eccentricity,u=t.inclination,c=t.ascNodeLongitude,l=t.argOfPeriapsis,h=s(r,o,t.semiLatusRectum),v=Math.sqrt(e*(2/h-1/i)),f=(0,n.zy)(a(r,o),v);return(0,n.HJ)(f,c,u,l)}t.orbitFromElements=function(t,r){var i=t.semiLatusRectum?t.semiLatusRectum:t.semiMajorAxis*(1-t.eccentricity*t.eccentricity),n=t.siderealPeriod?t.siderealPeriod:e(t.semiMajorAxis,r.stdGravParam);return{orbiting:r.id,semiMajorAxis:t.semiMajorAxis,eccentricity:t.eccentricity,inclination:t.inclination,argOfPeriapsis:t.argOfPeriapsis,ascNodeLongitude:t.ascNodeLongitude,meanAnomalyEpoch:t.meanAnomalyEpoch,epoch:t.epoch,semiLatusRectum:i,siderealPeriod:n}},t.maneuverFromOrbitalStates=function(t,e){var r=(0,n.qK)(e.vel,t.vel);return{preState:t,postState:e,deltaV:r,deltaVMag:(0,n.G7)(r)}},t.maneuverToComponents=function(t){var e=(0,n.G$)(t.preState.vel),r=(0,n.G$)((0,n.oF)(t.preState.pos,e)),i=(0,n.oF)(r,e);return{prograde:(0,n._O)(t.deltaV,e),normal:(0,n._O)(t.deltaV,r),radial:(0,n._O)(t.deltaV,i)}},t.rotateToInertialFromPerifocal=function(t,e){var r=e.ascNodeLongitude,i=e.inclination,o=e.argOfPeriapsis;return(0,n.HJ)(t,r,i,o)},t.rotateToPerifocalFromInertial=function(t,e){var r=e.ascNodeLongitude,i=e.inclination,o=e.argOfPeriapsis;return(0,n.HJ)(t,-o,-i,-r)},t.siderealPeriod=e,t.flightPathAngleAtTrueAnomaly=r,t.motionAngleAtTrueAnomaly=i,t.motionDirectionAtTrueAnomaly=a,t.distanceAtTrueAnomaly=s,t.distanceAtOrbitTrueAnomaly=function(t,e){return s(t,e.eccentricity,e.semiLatusRectum)},t.trueAnomalyAtDistance=function(t,e,r){return(0,n.ZF)((r/t-1)/e)},t.dateToMeanAnomaly=u,t.meanAnomalyToDate=c,t.trueToMeanAnomaly=l,t.meanToTrueAnomaly=h,t.dateToTrueAnomaly=v,t.trueAnomalyToDate=f,t.dateToOrbitTrueAnomaly=function(t,e){return v(t,e.eccentricity,e.siderealPeriod,e.meanAnomalyEpoch,e.epoch)},t.trueAnomalyToOrbitDate=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.epoch;return f(t,e.eccentricity,e.siderealPeriod,e.meanAnomalyEpoch,e.epoch,r)},t.angleInPlane=d,t.angleInOrbitPlane=function(t,e){return d(t,e.ascNodeLongitude,e.inclination,e.argOfPeriapsis)},t.positionAtTrueAnomaly=m,t.velocityAtTrueAnomaly=p,t.orbitToPositionAtDate=function(t,e){var r=t.eccentricity,i=t.meanAnomalyEpoch,n=t.epoch;return m(t,v(e,r,t.siderealPeriod,i,n))},t.orbitToVelocityAtDate=function(t,e,r){var i=t.eccentricity,n=t.meanAnomalyEpoch,o=t.epoch,a=t.siderealPeriod;return p(t,e.stdGravParam,v(r,i,a,n,o))},t.orbitToStateAtDate=function(t,e,r){var i=t.eccentricity,n=t.meanAnomalyEpoch,o=t.epoch,a=t.siderealPeriod,s=e.stdGravParam,u=v(r,i,a,n,o);return{date:r,pos:m(t,u),vel:p(t,s,u)}},t.stateToOrbit=function(t,r){var i=r.stdGravParam,o=t.pos,a=t.vel,s=(0,n.G7)(o),u=(0,n.A$)(a),c=t.date,h=1/(2/s-u/i),v=(0,n.oF)(o,a),f=(0,n.ZF)(v.z/(0,n.G7)(v)),m=(0,n.qK)((0,n.$_)((0,n.oF)(a,v),i),(0,n.$_)(o,s)),p=(0,n.G7)(m),b=(0,n.$_)(m,p);p<=1e-12&&(b=n.o7,p=0);var y=(0,n.oF)(n.gG,v),g=(0,n.G7)(y),M=(0,n.$_)(y,g);g<=1e-12&&(M=b,g=0);var Z=(0,n.z7)((0,n.JG)((0,n.ZF)(M.x),M.y),0),A=(0,n.z7)((0,n.JG)((0,n.ZF)((0,n._O)(M,b)),b.z),0),P=l((0,n.z7)(d(o,Z,f,A),0),p),T=h*(1-p*p),O=e(h,i);return{orbiting:r.id,semiMajorAxis:h,eccentricity:p,inclination:f,ascNodeLongitude:Z,argOfPeriapsis:A,meanAnomalyEpoch:P,epoch:c,semiLatusRectum:T,siderealPeriod:O}}}(i||(i={})),e.Z=i},2425:function(t,e,r){var i,n=r(724);!function(t){function e(t,e,n,o,a,s){for(var u=0,c=0,l=0,h=0,v=0,f=0,d=0;d<s;d++){var m=r(h,v,f,e,c=i(e,a,n),a),p=(h=m.DT)*h;if(e=u=e-(l=c-t)*(p-l*(v=m.DDT)/2)/(h*(p-l*v)+(f=m.DDDT)*l*l/6),Math.abs(e-u)<o)break}return e}function r(t,e,r,i,n,o){var a=o*o,s=a*o,u=1-i*i,c=Math.sqrt(1-a*u),l=c*c,h=l*c;return{DT:t=1/u*(3*n*i-2+2*s*i/c),DDT:e=1/u*(3*n+5*i*t+2*(1-a)*s/h),DDDT:1/u*(7*i*e+8*t-6*(1-a)*a*s*i/h/l)}}function i(t,e,r){var i=Math.abs(t-1);if(i<.2&&i>.01)return function(t,e,r){var i=1/(1-t*t);if(i>0){var o=2*Math.acos(t),a=2*Math.asin(Math.sqrt(e*e/i));return e<0&&(a=-a),i*Math.sqrt(i)*(o-Math.sin(o)-(a-Math.sin(a)*n.uo*r))/2}var s=2*Math.acosh(t),u=2*Math.asinh(Math.sqrt(-e*e/i));return e<0&&(u=-u),-i*Math.sqrt(-i)*(u-Math.sinh(u)-(s-Math.sinh(s)))/2}(t,e,r);var o=e*e,a=t*t-1,s=Math.abs(a),u=Math.sqrt(1+o*a);if(i<.01){var c=u-e*t,l=function(t,e){var r=1,i=1,n=1,o=0,a=0,s=0;for(;n>e;)a=r+(o=i*(3+s)*(1+s)/(2.5+s)*t/(s+1)),n=Math.abs(o),r=a,i=o,s++;return r}(.5*(1-e-t*c),1e-11);return(c*c*c*(l*=4/3)+4*e*c)/2+Math.PI*r/Math.pow(s,1.5)}var h=Math.sqrt(s),v=t*u-e*a,f=0;if(a<0){var d=Math.acos(v);f=Math.PI*r+d}else{var m=h*(u-e*t);f=Math.log(m+v)}return(t-e*u-f/h)/a}t.solve=function(t,o,a,s){var u,c,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],v=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=s.stdGravParam,d=(0,n.G7)(t),m=(0,n.G7)(o),p=(0,n.G7)((0,n.qK)(o,t)),b=.5*(d+m+p),y=(0,n.$_)(t,d),g=(0,n.$_)(o,m),M=(0,n.G$)((0,n.oF)(y,g)),Z=1-p/b,A=Math.sqrt(Z);M.z<0?(A=-A,u=(0,n.oF)(y,M),c=(0,n.oF)(g,M)):(u=(0,n.oF)(M,y),c=(0,n.oF)(M,g)),u=(0,n.G$)(u),c=(0,n.G$)(c),h&&(A=-A,u=(0,n.zy)(u,-1),c=(0,n.zy)(c,-1));var P,T=A*Z,O=Math.sqrt(2*f/(b*b*b))*a,D=O/Math.PI,S=Math.acos(A)+A*Math.sqrt(1-Z),j=S+D*Math.PI,x=2/3*(1-T),F=0,G=0,I=0,N={DT:F,DDT:G,DDDT:I};if(D>0&&O>j){for(var w=0,q=j,R=0,E=0;F=(N=r(F,G,I,R,q,A)).DT,G=N.DDT,I=N.DDDT,0!==F&&(E=R-F*G/(G*G-F*I/2)),!(Math.abs(R-E)<1e-13||w>12);)q=i(q,E,D),R=E,w++;q>O&&(D-=1)}if(0===(D=l<D?l:D)){P=e(O,O>=S?-(O-S)/(O-S+4):O<=x?x*(x-O)/(.4*(1-Z*T)*O)+1:Math.pow(O/S,.6931471805599453/Math.log(x/S))-1,0,1e-15,A,15)}else{var L=0;P=e(O,P=((L=v?Math.pow((D*Math.PI+Math.PI)/(8*O),2/3):Math.pow(8*O/(D*Math.PI),2/3))-1)/(L+1),D,1e-8,A,15)}var z=Math.sqrt(f*b/2),$=(d-m)/p,V=Math.sqrt(1-$*$),_=Math.sqrt(1-Z+Z*P*P),k=z*(A*_-P-$*(A*_+P))/d,U=-z*(A*_-P+$*(A*_+P))/m,H=z*V*(_+A*P),C=H/d,K=H/m,J=(0,n.sZ)((0,n.zy)(y,k),(0,n.zy)(u,C)),B=(0,n.sZ)((0,n.zy)(g,U),(0,n.zy)(c,K));return{v1:J,v2:B}},t.psolve=function(t,e,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=i.stdGravParam,s=(0,n.G7)(t),u=(0,n.G7)(e),c=Math.atan2((0,n.G7)((0,n.oF)(t,e)),(0,n._O)(t,e));c=o?-c:c;var l=(0,n.G$)((0,n.oF)(t,e));l.z<0&&(c=n.uo-c);var h,v,f=s*u*(1-Math.cos(c)),d=s+u,m=s*u*(1+Math.cos(c)),p=f/(d+Math.sqrt(2*m)),b=f/(d-Math.sqrt(2*m));c>Math.PI?(h=0,v=b):(h=p,v=1/0);for(var y=1e-12,g=1e3*y,M=200,Z=0,A=y+1,P=(p+b)/2,T=P,O=0,D=0,S=0,j=0;A>y&&Z<M;){Z++,O=0===(O=m*f*(P=T)/(P*P*(2*m-d*d)+2*f*d*P-f*f))?1e-100:O,D=1-u/P*(1-Math.cos(c)),S=s*u*Math.sin(c)/Math.sqrt(a*P);var x=void 0,F=void 0;if(j=Math.sqrt(a/P)*Math.tan(c/2)*((1-Math.cos(c))/P-1/s-1/u),O>0){var G=-s*u*j/Math.sqrt(a*O),I=1-s/O*(1-D),N=(0,n.z7)(Math.atan2(G,I)),w=Math.sqrt(O*O*O/a);F=-S/2/P-1.5*O*((x=S+w*(N-G))-S)*(f*f+(2*m-d*d)*P*P)/(m*f*P*P)+w*(2*f*G)/(P*(f-d*P))}else{var q=Math.acosh(1-s/O*(1-D)),R=Math.sqrt(-O*O*O/a);F=-S/2/P-1.5*O*((x=S+R*(Math.sinh(q)-q))-S)*(f*f+(2*m-d*d)*P*P)/(m*f*P*P)-R*(2*f*Math.sinh(q))/(P*(f-d*P))}A=Math.abs(r-x)/r,(T=P+(r-x)/F)<h?T=(P+h)/2:T>v&&(T=(P+v)/2)}A>g&&console.log("Lambert p-iteration failed to converge. error: %f",A);var E=(0,n.$_)((0,n.qK)(e,(0,n.zy)(t,D)),S),L=(0,n.sZ)((0,n.zy)(t,j),(0,n.zy)(E,S));return{v1:E,v2:L}}}(i||(i={})),e.Z=i},4067:function(t,e,r){r.d(e,{v$:function(){return n},ri:function(){return o},Zg:function(){return a},c4:function(){return u}});var i=(1+Math.sqrt(5))/2;function n(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-12,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=2*Number.EPSILON,s=e,u=r,c=t(s),l=t(u);if(Math.sign(c)===Math.sign(l))throw new Error("The provided bounds do not bracket a root.");if(Math.abs(c)<Math.abs(l)){var h=s;s=u,u=h;var v=c;c=l,l=v}for(var f=s,d=c,m=f,p=!0,b=0,y=1,g=n;g;){if(g--,Math.abs(u-s)<i)return u;if(Math.abs(l)<a)return u;b=0,b=Math.abs(c-d)>a&&Math.abs(l-d)>a?s*l*d/((c-l)*(c-d))+u*c*d/((l-c)*(l-d))+f*c*l/((d-c)*(d-l)):u-d*((u-s)/(l-c));var M=Math.abs(a*u),Z=Math.abs(b-u),A=Math.abs(u-f),P=Math.abs(f-m);if((b-(3*s+u)/4)*(b-u)>=0||p&&Z>=A/2||!p&&Z>=P/2||p&&A<M||!p&&P<M?(b=(s+u)/2,p=!0):p=!1,y=t(b),Math.abs(y)<a)return b;if(m=f,f=u,Math.sign(c)!==Math.sign(y)?(u=b,l=y):(s=b,c=y),Math.abs(c)<Math.abs(l)){var T=s;s=u,u=T;var O=c;c=l,l=O}}return Math.abs(y)>o&&console.log("Brent's method failed to find a root. Function value of %f at %f",y,b),b}function o(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50,a=2-i,s=n,u=e,c=r,l=c-u,h=u+a*l,v=h,f=v,d=t(f),m=t(v),p=t(h),b=0,y=0,g=(u+c)/2,M=0,Z=0,A=0,P=0,T=0,O=o;O;){if(O--,l<n)return g;A=.5*(M=(v-h)*(v-h)*(p-d)+(f-h)*(f-h)*(m-p))/(Z=(v-h)*(p-d)+(f-h)*(m-p)),0===Z||u>b||b>c||Math.abs(M/Z)>.5*Math.abs(T)||Math.abs(T)<s?P=a*(T=h<g?c-h:u-h):(T=P,P=A),(y=t(b=h+P))<=p?(u=b<h?u:h,c=b<h?h:c,f=v,v=h,h=b,d=m,m=p,p=y):(u=b<h?b:u,c=b<h?c:b,y<=m||v===h?(f=v,v=b,d=m,m=y):(y<=d||f===h||f===v)&&(f=b,d=y)),l=c-u,g=(u+c)/2}return g}function a(t,e,r,i){for(var n,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3,a=0,s=r,u=i+1;u>i&&a<o;)n=s,s-=t(s)/e(s),u<(u=Math.abs(s-n))&&(s=(s+n)/2),a++;return a>=o&&console.log("Newton's method failed to find a root. Error of %f. ",u),s}function s(t,e){return t.objx-e.objx}function u(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250*t[0].length,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.5,c=t[0].length,l=[],h=t[0].slice(),v=h.slice(),f=h.slice(),d=h.slice(),m=0;m<=c;m++)l.push({x:t[m],objx:e(t[m])});for(var p=0;p<i&&(l.sort(s),!(l[0].objx<r));p++){for(var b=0;b<=c;b++){h[b]=0;for(var y=0;y<c;y++)h[b]=h[b]+l[y].x[b];h[b]=h[b]/c}for(var g=0;g<c;g++)v[g]=h[g]+n*(h[g]-l[c].x[g]);var M=e(v);if(M<l[c-1].objx&&M>=l[0].objx)l[c].x=v.slice(),l[c].objx=M;else if(M<l[0].objx){for(var Z=0;Z<c;Z++)d[Z]=h[Z]+o*(v[Z]-h[Z]);var A=e(d);A<M?(l[c].x=d.slice(),l[c].objx=A):(l[c].x=v.slice(),l[c].objx=M)}else{if(M>l[c].objx){for(var P=0;P<c;P++)f[P]=h[P]+a*(l[c].x[P]-h[P]);var T=e(f);if(T<l[c].objx){l[c].x=f.slice(),l[c].objx=T;continue}}else{for(var O=0;O<c;O++)f[O]=h[O]+a*(v[O]-h[O]);var D=e(f);if(D<M){l[c].x=f.slice(),l[c].objx=D;continue}}for(var S=1;S<=c;S++){for(var j=1;j<c;j++)l[S].x[j]=l[0].x[j]+u*(l[S].x[j]-l[0].x[j]);l[S].objx=e(l[S].x)}}}return l[0].x}},8034:function(t,e,r){var i,n=r(8818),o=r(2425),a=r(6752),s=r(724);!function(t){function e(t,e){if(0===e)return t.sun;var r=t.orbiterIds.get(e);if(!r)throw new Error("No body with id ".concat(e));return r}t.transferTrajectory=function(t,e,r,i,a,u,c){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:(0,s.R3)(0,0,0),h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:(0,s.R3)(0,0,0),v=n.Z.orbitToStateAtDate(t,r,i),f=n.Z.orbitToStateAtDate(e,r,u),d=(0,s.sZ)(v.pos,l),m=(0,s.sZ)(f.pos,h);if(c){var p=n.Z.rotateToPerifocalFromInertial(m,t);p=n.Z.rotateToInertialFromPerifocal((0,s.R3)(p.x,p.y,0),t);var b=o.Z.solve(d,p,a,r),y=b.v1,g=n.Z.stateToOrbit({date:i,pos:d,vel:y},r),M=n.Z.angleInOrbitPlane(d,g),Z=n.Z.angleInOrbitPlane(p,g),A=M+Math.max(0,(0,s.z7)(Z-M)-s.pj),P=n.Z.trueAnomalyToOrbitDate(A,g,i),T={date:P,pos:n.Z.positionAtTrueAnomaly(g,A),vel:n.Z.velocityAtTrueAnomaly(g,r.stdGravParam,A)},O=(0,s.G$)((0,s.oF)(T.pos,T.vel)),D=(0,s.G$)((0,s.oF)(T.pos,m)),S=(0,s.ZF)((0,s._O)(O,D)),j=0===S?s.gG:(0,s.G$)((0,s.oF)(O,D));j=isNaN(j.x)?s.gG:j;var x=(0,s.oU)(T.vel,j,S),F={date:P,pos:T.pos,vel:x},G=n.Z.stateToOrbit(F,r),I={date:i,pos:d,vel:y},N=n.Z.orbitToStateAtDate(G,r,u);if(isNaN(N.pos.x)){var w=n.Z.angleInOrbitPlane(m,G);N={date:u,pos:m,vel:n.Z.velocityAtTrueAnomaly(G,r.stdGravParam,w)}}var q=n.Z.maneuverFromOrbitalStates(v,I),R=n.Z.maneuverFromOrbitalStates(N,f),E=n.Z.maneuverFromOrbitalStates(T,F),L={orbits:[g,G],intersectTimes:[i,P,u],maneuvers:[q,E,R]};return L}var z=o.Z.solve(d,m,a,r),$=z.v1,V=z.v2,_={date:i,pos:d,vel:$},k={date:u,pos:m,vel:V},U=n.Z.maneuverFromOrbitalStates(v,_),H=n.Z.maneuverFromOrbitalStates(k,f),C={orbits:[n.Z.stateToOrbit({date:i,pos:d,vel:$},r)],intersectTimes:[i,u],maneuvers:[U,H]};return C},t.ejectionTrajectories=function(t,r,i,o,u){for(var c,l,h,v,f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"simple",m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.slice(-1).map((function(t){return(0,s.R3)(0,0,0)})),p=[],b=u,y=o.length-1,g=y-1;g>=0;g--){var M=e(t,o[g]),Z=e(t,o[g+1]);if(0===g)l=r;else{var A=e(t,o[g-1]);l=A.orbit}if(g===y-1)c=i,h=n.Z.orbitToVelocityAtDate(c,Z,b),v=n.Z.orbitToVelocityAtDate(M.orbit,Z,b);else{var P=p[p.length-1];c=P.orbits[0],h=P.maneuvers[0].postState.vel,b=P.maneuvers[0].postState.date,v=P.maneuvers[0].preState.vel}var T=(0,s.qK)(h,v),O=g>0||f,D="simple"===d?a.Z.simpleDeparture(l,M,T,b,O):"direct"===d?a.Z.optimalDeparture(l,M,T,b,O,"direct",m[g]):"oberth"===d?a.Z.optimalDeparture(l,M,T,b,O,"oberth",m[g]):a.Z.simpleDeparture(l,M,T,b,O);if(g>0&&"simple"===d){var S=m[g-1];if((0,s.G7)(S)>0){var j=a.Z.departArriveForPosition((0,s.sZ)(D.maneuvers[0].preState.pos,S),M,T,b,1).orbit,x=n.Z.angleInOrbitPlane(D.maneuvers[0].preState.pos,l),F=n.Z.trueAnomalyToOrbitDate(x,l,j.epoch-l.siderealPeriod/2),G=b+F-j.epoch;j.epoch=F;var I=n.Z.velocityAtTrueAnomaly(l,M.stdGravParam,x),N={date:F,pos:D.maneuvers[0].preState.pos,vel:I},w=n.Z.orbitToStateAtDate(j,M,j.epoch),q=n.Z.maneuverFromOrbitalStates(N,w);D={orbits:[j],intersectTimes:[F,G],maneuvers:[q]}}}p.push(D)}return p.reverse()},t.insertionTrajectories=function(t,r,i,o,u){for(var c,l,h,v,f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"simple",m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.slice(0,-1).map((function(t){return(0,s.R3)(0,0,0)})),p=[],b=u,y=o.length-1,g=1;g<=y;g++){var M=e(t,o[g]),Z=e(t,o[g-1]);if(g===y)l=r;else{var A=e(t,o[g+1]);l=A.orbit}if(1===g)c=i,h=n.Z.orbitToVelocityAtDate(c,Z,b),v=n.Z.orbitToVelocityAtDate(M.orbit,Z,b);else{var P=p[p.length-1],T=P.orbits.length,O=P.maneuvers.length;c=P.orbits[T-1],h=P.maneuvers[O-1].preState.vel,b=P.maneuvers[O-1].preState.date,v=P.maneuvers[O-1].postState.vel}var D=(0,s.qK)(h,v),S=g<y||f,j="simple"===d?a.Z.simpleArrival(l,M,D,b,S):"direct"===d?a.Z.optimalArrival(l,M,D,b,S,"direct",m[g]):"oberth"===d?a.Z.optimalArrival(l,M,D,b,S,"oberth",m[g]):a.Z.simpleArrival(l,M,D,b,S);if(g<y&&"simple"===d&&(0,s.G7)(m[g])>0){var x=j.maneuvers.length,F=a.Z.departArriveForPosition((0,s.sZ)(j.maneuvers[x-1].postState.pos,m[g]),M,D,b,-1).orbit,G=n.Z.angleInOrbitPlane(j.maneuvers[x-1].postState.pos,l),I=n.Z.trueAnomalyToOrbitDate(G,l,F.epoch-l.siderealPeriod/2),N=b+I-F.epoch;F.epoch=I;var w=n.Z.velocityAtTrueAnomaly(l,M.stdGravParam,G),q={date:I,pos:j.maneuvers[x-1].postState.pos,vel:w},R=n.Z.orbitToStateAtDate(F,M,F.epoch),E=n.Z.maneuverFromOrbitalStates(R,q);j={orbits:[F],intersectTimes:[N,I],maneuvers:[E]}}p.push(j)}return p}}(i||(i={})),e.Z=i},7531:function(t,e,r){r.d(e,{CK:function(){return v},sn:function(){return f},VM:function(){return d}});var i=r(1413),n=r(8301),o=r(1120),a=r(136),s=r(9388),u=r(5671),c=r(3144),l=r(7487),h=r(2763),v=function(){function t(e){(0,u.Z)(this,t),this.id=void 0,this.name=void 0,this.radius=void 0,this.atmosphereHeight=void 0,this.mass=void 0,this.stdGravParam=void 0,this.soi=void 0,this.color=void 0,this.orbiters=[],this.id=e.id,this.name=e.name,this.radius=e.radius,this.atmosphereHeight=e.atmosphereHeight,this.mass=e.mass,this.stdGravParam=e.stdGravParam,this.soi=e.soi,this.color=new h.Z(e.color)}return(0,c.Z)(t,[{key:"data",get:function(){return{id:this.id,name:this.name,radius:this.radius,atmosphereHeight:this.atmosphereHeight,mass:this.mass,stdGravParam:this.stdGravParam,soi:this.soi,color:this.color}}},{key:"orbiterIds",get:function(){for(var t=[],e=0;e<this.orbiters.length;e++)t.push(this.orbiters[e].id);return t}},{key:"furtherstOrbiterDistance",get:function(){for(var t=0,e=0;e<this.orbiters.length;e++){var r=this.orbiters[e].orbit,i=r.semiMajorAxis*(1+r.eccentricity);t=Math.max(i,t)}return t}}]),t}(),f=function(t){(0,a.Z)(r,t);var e=(0,s.Z)(r);function r(t,i){var n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u.Z)(this,r),(n=e.call(this,t)).attractor=i,n.orbit=void 0,n.orbiting=void 0,n.orbit=new l.Z(t.orbit,n.attractor,o),n.orbiting=t.orbiting,n}return(0,c.Z)(r,[{key:"data",get:function(){return(0,i.Z)((0,i.Z)({},(0,n.Z)((0,o.Z)(r.prototype),"data",this)),{},{orbit:this.orbit.data,orbiting:this.orbiting})}}]),r}(v);function d(t){return void 0!==t.orbiting}},2763:function(t,e,r){var i=r(5671),n=r(3144),o=function(){function t(e){(0,i.Z)(this,t),this.r=void 0,this.g=void 0,this.b=void 0,this.r=e.r,this.g=e.g,this.b=e.b}return(0,n.Z)(t,[{key:"rescale",value:function(e){return new t({r:Math.max(Math.min(e*this.r,255),0),g:Math.max(Math.min(e*this.g,255),0),b:Math.max(Math.min(e*this.b,255),0)})}},{key:"toString",value:function(){return"rgb(".concat(this.r.toString(),",",this.g.toString(),",",this.b.toString(),")")}}]),t}();e.Z=o},7487:function(t,e,r){var i=r(5671),n=r(3144),o=r(8818),a=r(724),s=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i.Z)(this,t),this.semiMajorAxis=void 0,this.apoapsis=void 0,this.periapsis=void 0,this.eccentricity=void 0,this.inclination=void 0,this.argOfPeriapsis=void 0,this.ascNodeLongitude=void 0,this.meanAnomalyEpoch=void 0,this.epoch=void 0,this.semiLatusRectum=void 0,this.siderealPeriod=void 0,this.orbiting=void 0,this.attractorSoi=void 0,this.attractorStdGravParam=void 0,this.semiMajorAxis=e.semiMajorAxis,this.eccentricity=e.eccentricity,this.meanAnomalyEpoch=e.meanAnomalyEpoch,this.epoch=e.epoch,n?(this.inclination=(0,a.Id)(e.inclination),this.argOfPeriapsis=(0,a.Id)(e.argOfPeriapsis),this.ascNodeLongitude=(0,a.Id)(e.ascNodeLongitude)):(this.inclination=e.inclination,this.argOfPeriapsis=e.argOfPeriapsis,this.ascNodeLongitude=e.ascNodeLongitude),this.eccentricity<1?(this.periapsis=this.semiMajorAxis*(1-this.eccentricity),this.apoapsis=this.semiMajorAxis*(1+this.eccentricity)):this.periapsis=this.semiMajorAxis*(this.eccentricity-1),e.semiLatusRectum?this.semiLatusRectum=e.semiLatusRectum:this.semiLatusRectum=this.semiMajorAxis*(1-this.eccentricity*this.eccentricity),e.siderealPeriod?this.siderealPeriod=e.siderealPeriod:this.siderealPeriod=o.Z.siderealPeriod(e.semiMajorAxis,r.stdGravParam),this.orbiting="orbiting"in e?e.orbiting:r.id,this.attractorSoi=r.soi,this.attractorStdGravParam=r.stdGravParam}return(0,n.Z)(t,[{key:"data",get:function(){return{orbiting:this.orbiting,semiMajorAxis:this.semiMajorAxis,apoapsis:this.apoapsis,periapsis:this.periapsis,eccentricity:this.eccentricity,inclination:this.inclination,argOfPeriapsis:this.argOfPeriapsis,ascNodeLongitude:this.ascNodeLongitude,meanAnomalyEpoch:this.meanAnomalyEpoch,epoch:this.epoch,semiLatusRectum:this.semiLatusRectum,siderealPeriod:this.siderealPeriod}}}],[{key:"fromOrbitalElements",value:function(e,r){return new t(o.Z.orbitFromElements(e,r),r)}}]),t}();e.Z=s},4940:function(t,e,r){var i=r(7762),n=r(2982),o=r(5671),a=r(3144),s=r(7531),u=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,o.Z)(this,t),this.sun=void 0,this.orbiters=void 0,this.orbiterIds=void 0,this.orbiters=[],this.orbiterIds=new Map,this.sun=new s.CK(e);for(var n=0;n<r.length;n++){var a=r[n],u=0===a.orbiting?this.sun:this.orbiterIds.get(a.orbiting),c=new s.sn(a,u,i);this.orbiterIds.set(c.id,c),u.orbiters.push(c),this.orbiters.push(c)}}return(0,a.Z)(t,[{key:"orbiting",get:function(){return(0,n.Z)(this.orbiterIds.values())}},{key:"bodies",get:function(){return[this.sun].concat((0,n.Z)(this.orbiters))}},{key:"data",get:function(){var t,e=[],r=(0,i.Z)(this.bodies);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.data)}}catch(o){r.e(o)}finally{r.f()}return e}},{key:"size",get:function(){return 1+this.orbiterIds.size}},{key:"bodyFromName",value:function(t){for(var e=0,r=[this.sun].concat((0,n.Z)(this.orbiters));e<r.length;e++){var i=r[e];if(i.name===t)return i}throw new Error("No body with name ".concat(t))}},{key:"bodyFromId",value:function(t){if(0===t)return this.sun;var e=this.orbiterIds.get(t);if(!e)throw new Error("No body with id ".concat(t));return e}},{key:"sequenceToSun",value:function(t){for(var e=this.bodyFromId(t),r=[e.id];(0,s.VM)(e);)e=this.bodyFromId(e.orbiting),r.push(e.id);return r}},{key:"commonAttractorId",value:function(t,e){for(var r=this.sequenceToSun(t),i=this.sequenceToSun(e),n=0;n<r.length;n++)if(i.includes(r[n]))return r[n];throw new Error("Bodies do not share a common attractor (error in defining this SolarSystem)")}}]),t}();e.Z=u},907:function(t,e,r){function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}r.d(e,{Z:function(){return i}})},7326:function(t,e,r){function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}r.d(e,{Z:function(){return i}})},5671:function(t,e,r){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.d(e,{Z:function(){return i}})},3144:function(t,e,r){function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r.d(e,{Z:function(){return n}})},7762:function(t,e,r){r.d(e,{Z:function(){return n}});var i=r(181);function n(t,e){var r="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=(0,i.Z)(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}},9388:function(t,e,r){r.d(e,{Z:function(){return a}});var i=r(1120),n=r(8814),o=r(2963);function a(t){var e=(0,n.Z)();return function(){var r,n=(0,i.Z)(t);if(e){var a=(0,i.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,o.Z)(this,r)}}},4942:function(t,e,r){function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return i}})},8301:function(t,e,r){r.d(e,{Z:function(){return n}});var i=r(8415);function n(){return n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=(0,i.Z)(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},n.apply(this,arguments)}},1120:function(t,e,r){function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}r.d(e,{Z:function(){return i}})},136:function(t,e,r){r.d(e,{Z:function(){return n}});var i=r(9611);function n(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,i.Z)(t,e)}},8814:function(t,e,r){function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}r.d(e,{Z:function(){return i}})},1413:function(t,e,r){r.d(e,{Z:function(){return o}});var i=r(4942);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){(0,i.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},2963:function(t,e,r){r.d(e,{Z:function(){return o}});var i=r(1002),n=r(7326);function o(t,e){if(e&&("object"===(0,i.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,n.Z)(t)}},9611:function(t,e,r){function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}r.d(e,{Z:function(){return i}})},8415:function(t,e,r){r.d(e,{Z:function(){return n}});var i=r(1120);function n(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,i.Z)(t)););return t}},2982:function(t,e,r){r.d(e,{Z:function(){return o}});var i=r(907);var n=r(181);function o(t){return function(t){if(Array.isArray(t))return(0,i.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,n.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1002:function(t,e,r){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r.d(e,{Z:function(){return i}})},181:function(t,e,r){r.d(e,{Z:function(){return n}});var i=r(907);function n(t,e){if(t){if("string"===typeof t)return(0,i.Z)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,i.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=774.b0806af3.chunk.js.map